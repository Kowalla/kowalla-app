(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{413:function(e,t,r){var content=r(470);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("4b835274",content,!0,{sourceMap:!1})},469:function(e,t,r){"use strict";var n=r(413);r.n(n).a},470:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".box[data-v-081bb8fa]{width:800px;max-width:100%}.button.action[data-v-081bb8fa]{color:#fff;background-color:#39c9a0;border-color:#39c9a0;margin-bottom:1.75em}.profilePic img[data-v-081bb8fa]{width:180px;height:180px;border-radius:6px;-o-object-fit:cover;object-fit:cover}.picSection[data-v-081bb8fa]{text-align:center}.bannerPic img[data-v-081bb8fa]{width:1000px;max-width:100%;max-height:250px;-o-object-fit:cover;object-fit:cover}",""])},493:function(e,t,r){"use strict";r.r(t);r(28),r(20);var n=r(4),o=r(62),c=r(142),l=r(61),d=r(141),m=r(366),f=r(376),h=r(367),v=r(375),P=(r(115),r(114),r(140),{name:"CreateSpaceModal",props:{name:{type:String,default:""},headerPicture:{type:String,default:""},profilePicture:{type:String,default:""},description:{type:String,default:""},communityId:{type:String,default:""}},data:function(){return{profilePicFile:"",bannerPicFile:"",editForm:{name:this.name,description:this.description,profilePicture:this.profilePicture,headerPicture:this.headerPicture,admins:[]}}},methods:{selectFile:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"profile"===t?this.profilePicFile=this.$refs.profilePicFile.files[0]:this.bannerPicFile=this.$refs.bannerPicFile.files[0],r=new FileReader,n=this,r.onload=function(e){"profile"===t?n.editForm.profilePicture=e.target.result:n.editForm.headerPicture=e.target.result},"profile"===t?r.readAsDataURL(this.profilePicFile):r.readAsDataURL(this.bannerPicFile);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),uploadImage:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,image,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=new FormData).append("picType","community"),"profile"!==t){e.next=17;break}return e.prev=3,r.append("file",this.profilePicFile),e.next=7,this.$axios.$post("/api/v1/profilePicUpload",r);case 7:image=e.sent,this.editForm.profilePicture=image.file,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),this.$toast.open({duration:5e3,message:"There was an error uploading your profile picture. Please try again.",position:"is-top",type:"is-danger"});case 15:e.next=29;break;case 17:return r.append("file",this.bannerPicFile),e.prev=18,e.next=21,this.$axios.$post("/api/v1/bannerPicUpload",r);case 21:n=e.sent,this.editForm.headerPicture=n.file,e.next=29;break;case 25:e.prev=25,e.t1=e.catch(18),console.log(e.t1),this.$toast.open({duration:5e3,message:"There was an error uploading your banner picture. Please try again.",position:"is-top",type:"is-danger"});case 29:case"end":return e.stop()}},e,this,[[3,11],[18,25]])}));return function(t){return e.apply(this,arguments)}}(),editCommunity:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.profilePicture===t.profilePicture){e.next=4;break}return e.next=3,this.uploadImage();case 3:this.profilePicture.includes("https://kowalla-dev")&&(r=this.profilePicture.split("profile-pics/")[1],this.$axios.$post("/api/v1/imageDelete",{bucket:"kowalla-dev/community/profile-pics",fileName:r}));case 4:if(this.headerPicture===t.headerPicture){e.next=8;break}return e.next=7,this.uploadImage("banner");case 7:this.headerPicture.includes("https://kowalla-dev")&&(n=this.profilePicture.split("profile-pics/")[1],this.$axios.$post("/api/v1/imageDelete",{bucket:"kowalla-dev/community/banner-pics",fileName:n}));case 8:return e.prev=8,e.next=11,this.$axios.put("api/v1/communities/".concat(this.communityId),{name:t.name,description:t.description,profilePicture:t.profilePicture,headerPicture:t.headerPicture});case 11:o=e.sent,c={name:t.name,pictureUrl:t.profilePicture,communityId:o._id},this.$store.commit("user/editOwned",c),this.$router.push({path:"/dev/community/".concat(t.name)}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0);case 20:case"end":return e.stop()}},e,this,[[8,17]])}));return function(t){return e.apply(this,arguments)}}()}}),x=(r(469),r(1)),y=Object(x.a)(P,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("section",[r("div",{staticClass:"title"},[e._v("Edit "+e._s(e.name))]),e._v(" "),r("b-field",{attrs:{label:"Community name"}},[r("b-input",{attrs:{maxlength:"20"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),r("b-field",{attrs:{label:"Profile Picture"}}),e._v(" "),r("div",{staticClass:"picSection"},[r("p",{staticClass:"profilePic"},[r("img",{attrs:{src:e.editForm.profilePicture,onerror:"this.src='https://gradientjoy.com/180'"}})]),e._v(" "),r("a",{staticClass:"button action"},[r("input",{ref:"profilePicFile",staticClass:"file-input",attrs:{type:"file"},on:{change:function(t){return e.selectFile("profile")}}}),e._v(" "),e.editForm.profilePicture?r("span",[e._v("Change Profile Picture")]):r("span",[e._v("Add Profile Picture")]),e._v("  \n        "),r("font-awesome-icon",{attrs:{icon:"camera"}})],1)]),e._v(" "),r("b-field",{attrs:{label:"Banner Picture"}}),e._v(" "),r("div",{staticClass:"picSection"},[r("p",{staticClass:"bannerPic"},[r("img",{attrs:{src:e.editForm.headerPicture,onerror:"this.src='https://gradientjoy.com/1000x250'"}})]),e._v(" "),r("a",{staticClass:"button action"},[r("input",{ref:"bannerPicFile",staticClass:"file-input",attrs:{type:"file"},on:{change:function(t){return e.selectFile("banner")}}}),e._v(" "),e.editForm.headerPicture?r("span",[e._v("Change Banner Picture")]):r("span",[e._v("Add Banner Picture")]),e._v("  \n        "),r("font-awesome-icon",{attrs:{icon:"camera"}})],1)]),e._v(" "),r("b-field",{attrs:{label:"Description"}},[r("b-input",{attrs:{maxlength:"500",type:"textarea"},model:{value:e.editForm.description,callback:function(t){e.$set(e.editForm,"description",t)},expression:"editForm.description"}})],1),e._v(" "),r("a",{staticClass:"button action",on:{click:function(t){return e.editCommunity(e.editForm)}}},[e._v("\n      Submit\n    ")])],1)])},[],!1,null,"081bb8fa",null).exports,F=r(423),_={name:"Edit",components:{EditCommunityForm:y,Header:l.a,MobileHeader:o.a,MobileFooter:c.a,NavPane:d.a,DescriptionCard:m.a,ProfileCard:f.a,InfoPane:h.a,EditButton:v.a,EditProjectModal:F.a},data:function(){return{communityName:"",bannerPictureUrl:"",profilePictureUrl:"",communityDescription:"",communityId:"",infoRes:!1}},computed:{name:function(){return this.$route.params.communityname},activeTab:function(){return this.$store.state.activeTabs.CommunitySettingsActiveTab}},mounted:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.$store.state.user.owned){e.next=10;break}i=0;case 2:if(!(i<this.$store.state.user.owned.length)){e.next=9;break}if(this.$store.state.user.owned[i].name!==this.name){e.next=6;break}return t=!0,e.abrupt("break",9);case 6:i++,e.next=2;break;case 9:t||this.$router.push({path:"/dev/community/".concat(this.name)});case 10:return e.next=12,this.$axios.get("/api/v1/communities/community/".concat(this.name));case 12:this.infoRes=e.sent,this.bannerPictureUrl=this.infoRes.data.headerPicture,this.profilePictureUrl=this.infoRes.data.profilePicture,this.communityId=this.infoRes.data._id,this.communityDescription=this.infoRes.data.description,document.title="Kowalla - @".concat(this.name," Settings");case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},w=Object(x.a)(_,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"screen background-tint"},[r("div",{staticClass:"container is-fullhd is-hidden-touch"},[r("div",{staticClass:"columns is-marginless main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[r("div",{staticClass:"column is-one-quarter is-paddingless side-pane"},[r("NavPane")],1),e._v(" "),r("div",{staticClass:"column is-one-half is-paddingless"},[r("b-tabs",{attrs:{id:"columnTabs"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("b-tab-item",[e.infoRes?r("EditCommunityForm",{attrs:{name:e.name,"header-picture":e.bannerPictureUrl,"profile-picture":e.profilePictureUrl,description:e.communityDescription,"community-id":e.communityId}}):e._e()],1),e._v(" "),r("b-tab-item",[e._v("\n            Test!\n          ")])],1)],1),e._v(" "),r("div",{staticClass:"column is-one-quarter is-paddingless"})])]),e._v(" "),r("div",{staticClass:"is-marginless is-hidden-desktop mobile-main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[r("b-tabs",{attrs:{id:"columnTabs"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("b-tab-item",[e.infoRes?r("EditCommunityForm",{attrs:{name:e.name,"header-picture":e.bannerPictureUrl,"profile-picture":e.profilePictureUrl,description:e.communityDescription,"community-id":e.communityId}}):e._e()],1),e._v(" "),r("b-tab-item",[e._v("\n        Test!\n      ")])],1)],1)])},[],!1,null,"4ac1946e",null);t.default=w.exports}}]);