(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{199:function(t,e,i){var s=i(230);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i(25).default)("7e106402",s,!0,{})},200:function(t,e,i){var s=i(232);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i(25).default)("241d3752",s,!0,{})},227:function(t,e,i){"use strict";i(27);var s=i(28),a=i.n(s),n=(i(44),i(13),i(1)),o=i.n(n),r=i(254),c=i(286),l=i(55),d={name:"dropdown"},u=(i(229),i(26)),v=Object(u.a)(d,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"dropdown-trigger"},[e("button",{staticClass:"button",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[this._m(0),this._v(" "),e("span",{staticClass:"icon is-medium"},[e("font-awesome-icon",{attrs:{icon:"angle-down"}})],1)])]),this._v(" "),this._m(1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("b",[this._v("@Kowalla")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[i("div",{staticClass:"dropdown-content"},[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("\n                Dropdown item\n            ")]),t._v(" "),i("a",{staticClass:"dropdown-item"},[t._v("\n                Other dropdown item\n            ")]),t._v(" "),i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("\n                Active dropdown item\n            ")]),t._v(" "),i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("\n                Other dropdown item\n            ")]),t._v(" "),i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("\n                With a divider\n            ")])])])}],!1,null,"baf125f6",null);v.options.__file="dropdownItems.vue";var f={name:"createPostModal",components:{Dropdown:v.exports,Editor:r.a,EditorContent:r.b,EditorMenuBar:r.c},data:function(){return{userDropdown:!1,commDropdown:!1,createDialog:!1,editor:null,file:"",s3Loading:!1,clearPhoto:!1,photoUrl:"",timedPost:!1,time:new Date(2018,11,24,0,0),isActive:null,userCompleted:null,unselectableTimes:[]}},beforeDestroy:function(){var t=o()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==this.clearPhoto){t.next=6;break}return t.next=3,this.photoUrl.split("post-pics/")[1];case 3:return e=t.sent,t.next=6,this.$axios.post("/api/v1/posts/imageDelete",{bucket:"kowalla-dev/user/post-pics",fileName:e});case 6:return t.next=8,this.editor.destroy();case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),computed:a()({},Object(l.b)("user",["activePost"]),{minutes:function(){return this.time?this.time.getMinutes():0},hours:function(){return this.time?this.time.getHours():0},expiration:function(){var t=new Date,e=t.setHours(t.getHours()+this.hours,t.getMinutes()+this.minutes);return new Date(e)}}),methods:{toggleTimedPost:function(){this.timedPost=!this.timedPost,this.isActive=!0,this.timedPost||(this.time=null,this.isActive=!1)},createPost:function(){var t=o()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.s3Loading=!0,0!==this.html.replace(/(<([^>]+)>)/gi,"").length){t.next=6;break}return this.$toast.open({duration:5e3,message:"You must input some text to make a post",position:"is-top",type:"is-danger"}),this.s3Loading=!1,t.abrupt("return",null);case 6:return t.next=8,this.$axios.get("/api/v1/communities/5c3292a2f03d751a7ffb80ab");case 8:return e=t.sent,t.next=11,this.$axios.post("/api/v1/communities/1234567890/posts",{profileId:this.$store.state.user._id,communityId:e._id,content:this.html,duration:this.time,expiration:this.expiration||null,isActive:this.isActive,userCompleted:this.userCompleted});case 11:this.clearPhoto=!1,this.s3Loading=!1,this.$parent.close(),this.timedPost&&(this.$router.push({path:"/dev/focus"}),"/dev/focus"===this.$router.history.current.fullPath&&this.$router.go());case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selectFile:function(){var t=o()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.file.files[0];case 2:this.file=t.sent,this.sendFile(e);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),sendFile:function(){var t=o()(regeneratorRuntime.mark(function t(e){var i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearPhoto=!0,(i=new FormData).append("file",this.file),t.prev=3,t.next=6,this.$axios.post("/api/v1/posts/imageUpload",i);case 6:s=t.sent,this.photoUrl=s.data.file,e({src:s.data.file}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),this.$toast.open({duration:5e3,message:"There was an error with your file. Please confirm it's less than 10MB and a png, jpeg, or gif.",position:"is-top",type:"is-danger"});case 15:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e){return t.apply(this,arguments)}}()},mounted:function(){var t=this;this.editor=new r.a({autoFocus:!0,extensions:[new c.a,new c.c,new c.e,new c.f,new c.g({levels:[1,2,3]}),new c.i,new c.j,new c.m,new c.n,new c.p,new c.q,new c.b,new c.d,new c.k,new c.l,new c.o,new c.r,new c.h],content:"<p></p><p></p><p></p><p></p>",onUpdate:function(e){var i=e.getHTML;t.html=i()}})}},h=(i(231),Object(u.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-content"},[i("div",{staticClass:"box"},[i("article",{staticClass:"media"},[i("div",{staticClass:"media-left"},[i("figure",{staticClass:"image is-64x64"},[i("img",{attrs:{src:this.$store.state.user.profilePicture}})])]),t._v(" "),i("div",{staticClass:"media-content"},[i("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.commands,a=e.isActive;return i("div",{staticClass:"field has-addons"},[i("a",{staticClass:"button is-white",class:{"is-active":a.bold()},on:{click:s.bold}},[i("font-awesome-icon",{attrs:{icon:"bold"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.italic()},on:{click:s.italic}},[i("font-awesome-icon",{attrs:{icon:"italic"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.strike()},on:{click:s.strike}},[i("font-awesome-icon",{attrs:{icon:"strikethrough"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.underline()},on:{click:s.underline}},[i("font-awesome-icon",{attrs:{icon:"underline"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.code()},on:{click:s.code}},[i("font-awesome-icon",{attrs:{icon:"code"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.heading({level:1})},on:{click:function(t){return s.heading({level:1})}}},[t._v("\n                                H1\n                            ")]),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.heading({level:2})},on:{click:function(t){return s.heading({level:2})}}},[t._v("\n                                H2\n                            ")]),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.heading({level:3})},on:{click:function(t){return s.heading({level:3})}}},[t._v("\n                                H3\n                            ")]),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.todo_list()},on:{click:s.todo_list}},[i("font-awesome-icon",{attrs:{icon:"tasks"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.bullet_list()},on:{click:s.bullet_list}},[i("font-awesome-icon",{attrs:{icon:"list-ul"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.ordered_list()},on:{click:s.ordered_list}},[i("font-awesome-icon",{attrs:{icon:"list-ol"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.blockquote()},on:{click:s.blockquote}},[i("font-awesome-icon",{attrs:{icon:"quote-right"}})],1),t._v(" "),i("a",{staticClass:"button is-white",on:{click:s.horizontal_rule}},[i("font-awesome-icon",{attrs:{icon:"minus"}})],1),t._v(" "),i("a",{staticClass:"button is-white"},[i("input",{ref:"file",staticClass:"file-input",attrs:{type:"file"},on:{change:function(e){return t.selectFile(s.image)}}}),t._v(" "),i("font-awesome-icon",{attrs:{icon:"camera"}})],1),t._v(" "),t.activePost.isActive?t._e():i("a",{staticClass:"button is-white",on:{click:t.toggleTimedPost}},[i("font-awesome-icon",{attrs:{icon:"clock"}}),t._v(" Â  Timed Post\n                            ")],1)])}}])}),t._v(" "),t.timedPost?i("div",{staticClass:"block"},[t._m(0),t._v(" "),i("b-timepicker",{attrs:{inline:"","max-time":new Date(2018,11,24,10)},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1):t._e(),t._v(" "),i("div",{staticClass:"editor content"},[i("editor-content",{staticClass:"editor__content",attrs:{editor:t.editor}})],1),t._v(" "),i("div",{staticClass:"level is-paddingless"},[i("a",{staticClass:"level-item button action post",class:{"is-loading":t.s3Loading},on:{click:function(e){return t.createPost()}}},[i("b",[t._v("Post")])]),t._v(" "),i("div",{staticClass:"level-right"},[i("span",{staticClass:"level-item has-text-grey"},[t._v("as")]),t._v(" "),i("div",{staticClass:"level-item dropdown",class:{"is-active":t.userDropdown},on:{click:function(e){t.userDropdown=!t.userDropdown}}},[i("dropdown")],1),t._v(" "),i("span",{staticClass:"level-item has-text-grey"},[t._v("in")]),t._v(" "),i("div",{staticClass:"level-item dropdown",class:{"is-active":t.commDropdown},on:{click:function(e){t.commDropdown=!t.commDropdown}}},[i("dropdown")],1)])])],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("b",[this._v("Select a timespan for your timed post:")])])}],!1,null,"31b572b2",null));h.options.__file="CreatePostModal.vue";e.a=h.exports},229:function(t,e,i){"use strict";var s=i(199);i.n(s).a},230:function(t,e,i){(t.exports=i(24)(!1)).push([t.i,"",""])},231:function(t,e,i){"use strict";var s=i(200);i.n(s).a},232:function(t,e,i){(t.exports=i(24)(!1)).push([t.i,".section[data-v-31b572b2]{padding-bottom:0}span[data-v-31b572b2]{color:#39c9a0}.box[data-v-31b572b2]{width:800px;max-width:100%}.modal-content[data-v-31b572b2]{border-radius:6px;margin:0;color:#39c9a0;width:auto;overflow:visible}.level[data-v-31b572b2]{padding:1rem}.modal-card-body[data-v-31b572b2]{overflow:visible}.field[data-v-31b572b2]{margin:1em 0;display:flex;flex-wrap:wrap}.button.action[data-v-31b572b2]{width:12em;color:#fff;background-color:#39c9a0;border-color:#39c9a0}.post[data-v-31b572b2]{margin-right:.75em}.is-white[data-v-31b572b2]:hover{background-color:#e9ebee}.dropdown-content[data-v-31b572b2]{overflow:visible}div.animation-content[data-v-31b572b2]{margin:0}.block[data-v-31b572b2]{color:#39c9a0}.editor__content[data-v-31b572b2]{max-height:50vh;overflow-y:scroll;word-break:break-word}",""])},323:function(t,e,i){var s=i(403);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i(25).default)("a9ba51ec",s,!0,{})},402:function(t,e,i){"use strict";var s=i(323);i.n(s).a},403:function(t,e,i){(t.exports=i(24)(!1)).push([t.i,".focusPage[data-v-5bff4c27]{position:absolute;top:0;left:0;width:100%;height:100%;background-image:url(https://source.unsplash.com/collection/1242150);background-size:cover}.container[data-v-5bff4c27]{height:90%;width:100%;margin:0 auto}.columns[data-v-5bff4c27]{height:90%}.column[data-v-5bff4c27],.columns[data-v-5bff4c27]{max-height:90%}.title[data-v-5bff4c27]{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;text-align:center;color:#fff}.livePost[data-v-5bff4c27]{margin:0 auto;padding:1em}.livePost[data-v-5bff4c27],.liveTimer[data-v-5bff4c27]{border-radius:6px;background-color:rgba(0,0,0,.35);color:#fff}.liveTimer[data-v-5bff4c27]{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:10vw;text-align:center;padding:0 .25em}.field[data-v-5bff4c27]{display:block}.editor__content[data-v-5bff4c27]{color:#fff;max-height:50vh;overflow-y:scroll;word-wrap:break-word}.is-white[data-v-5bff4c27]{background-color:transparent;color:#fff}.is-white[data-v-5bff4c27]:hover{background-color:#e9ebee}.button.action[data-v-5bff4c27]{font-size:2em;margin:0 auto;background-color:#39c9a0;border-color:#39c9a0}.button.action[data-v-5bff4c27],.startNew[data-v-5bff4c27]{color:#fff;border-radius:6px}.startNew[data-v-5bff4c27]{display:block;text-align:center;background-color:rgba(0,0,0,.35);margin-top:2.25em;padding:.25em}@media only screen and (max-width:600px){.columns[data-v-5bff4c27]{flex-direction:column-reverse;display:flex}}",""])},439:function(t,e,i){"use strict";i.r(e);i(13);var s=i(1),a=i.n(s),n=i(254),o=i(286),r=i(280),c=i(227),l={name:"focus",components:{CreatePostModal:c.a,Header:r.a,Editor:n.a,EditorContent:n.b,EditorMenuBar:n.c},data:function(){return{editor:null,post:{},countdown:""}},methods:{cardModal:function(){this.$modal.open({parent:this,component:c.a,props:{reactionsFormatted:this.reactionsFormatted},hasModalCard:!0})},countdownTimer:function(t){var e=this,i=setInterval(function(){var s=(new Date).getTime(),a=t-s,n=Math.floor(a%864e5/36e5),o=Math.floor(a%36e5/6e4),r=Math.floor(a%6e4/1e3);n=n<10?"0"+n:n,o=o<10?"0"+o:o,30!==(r=r<10?"0"+r:r)&&"00"!==r||e.updatePost(),e.countdown="".concat(n,":").concat(o,":").concat(r),"00:00:00"===e.countdown&&(e.updatePost(!0),clearInterval(i))},1e3)},updatePost:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?t&&this.$axios.put("/api/v1/posts/".concat(this.post.data._id),{content:this.html,isActive:!1,userCompleted:!0}):this.$axios.put("/api/v1/posts/".concat(this.post.data._id),{content:this.html})},selectFile:function(){var t=a()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.file.files[0];case 2:this.file=t.sent,this.sendFile(e);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),sendFile:function(){var t=a()(regeneratorRuntime.mark(function t(e){var i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearPhoto=!0,(i=new FormData).append("file",this.file),t.prev=3,t.next=6,this.$axios.post("/api/v1/posts/imageUpload",i);case 6:s=t.sent,this.photoUrl=s.data.file,e({src:s.data.file}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),this.$toast.open({duration:5e3,message:"There was an error with your file. Please confirm it's less than 10MB and a png, jpeg, or gif.",position:"is-top",type:"is-danger"});case 15:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e){return t.apply(this,arguments)}}()},mounted:function(){var t=a()(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/v1/posts/active/".concat(this.$store.state.user._id));case 2:if(this.post=t.sent,!0!==this.post.data.isActive){t.next=8;break}return this.countdownTimer(new Date(this.post.data.expiration).getTime()),t.next=7,new n.a({autoFocus:!0,extensions:[new o.a,new o.c,new o.e,new o.f,new o.g({levels:[1,2,3]}),new o.i,new o.j,new o.m,new o.n,new o.p,new o.q,new o.b,new o.d,new o.k,new o.l,new o.o,new o.r,new o.h],content:this.post.data.content,onUpdate:function(t){var i=t.getHTML;e.html=i()}});case 7:this.editor=t.sent;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),computed:{activePost:function(){return this.$store.state.user.activePost}}},d=(i(402),i(26)),u=Object(d.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"focusPage"},[i("Header"),t._v(" "),t.post.data&&!t.post.data.userCompleted?i("div",{staticClass:"container"},[i("div",{staticClass:"columns is-vcentered is-centered is-marginless main-margin"},[i("div",{staticClass:"column"},[i("div",{staticClass:"card livePost"},[t._m(0),t._v(" "),i("div",{staticClass:"media-content"},[i("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.commands,a=e.isActive;return i("div",{staticClass:"field has-addons"},[i("a",{staticClass:"button is-white",class:{"is-active":a.bold()},on:{click:s.bold}},[i("font-awesome-icon",{attrs:{icon:"bold"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.italic()},on:{click:s.italic}},[i("font-awesome-icon",{attrs:{icon:"italic"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.strike()},on:{click:s.strike}},[i("font-awesome-icon",{attrs:{icon:"strikethrough"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.underline()},on:{click:s.underline}},[i("font-awesome-icon",{attrs:{icon:"underline"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.code()},on:{click:s.code}},[i("font-awesome-icon",{attrs:{icon:"code"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.heading({level:1})},on:{click:function(t){return s.heading({level:1})}}},[t._v("\n                                        H1\n                                    ")]),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.heading({level:2})},on:{click:function(t){return s.heading({level:2})}}},[t._v("\n                                        H2\n                                    ")]),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.heading({level:3})},on:{click:function(t){return s.heading({level:3})}}},[t._v("\n                                        H3\n                                    ")]),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.todo_list()},on:{click:s.todo_list}},[i("font-awesome-icon",{attrs:{icon:"tasks"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.bullet_list()},on:{click:s.bullet_list}},[i("font-awesome-icon",{attrs:{icon:"list-ul"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.ordered_list()},on:{click:s.ordered_list}},[i("font-awesome-icon",{attrs:{icon:"list-ol"}})],1),t._v(" "),i("a",{staticClass:"button is-white",class:{"is-active":a.blockquote()},on:{click:s.blockquote}},[i("font-awesome-icon",{attrs:{icon:"quote-right"}})],1),t._v(" "),i("a",{staticClass:"button is-white",on:{click:s.horizontal_rule}},[i("font-awesome-icon",{attrs:{icon:"minus"}})],1),t._v(" "),i("a",{staticClass:"button is-white"},[i("input",{ref:"file",staticClass:"file-input",attrs:{type:"file"},on:{change:function(e){return t.selectFile(s.image)}}}),t._v(" "),i("font-awesome-icon",{attrs:{icon:"camera"}})],1)])}}],null,!1,2307712872)}),t._v(" "),i("div",{staticClass:"editor content"},[i("editor-content",{staticClass:"editor__content focusEditor",attrs:{editor:t.editor}})],1)],1)])]),t._v(" "),i("div",{staticClass:"column"},[i("div",{staticClass:"card liveTimer"},[i("b",[i("span",{staticClass:"countdown"},[t._v(t._s(t.countdown))])])])])])]):i("div",{staticClass:"container is-size-1"},[i("div",{staticClass:"startNew"},[t._m(1),t._v(" "),i("p",[i("a",{staticClass:"button action",on:{click:function(e){return t.cardModal()}}},[i("b",[t._v("Start")])])])])])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"is-size-1 title"},[e("b",[this._v("Live Post")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("b",[e("span",[this._v("Start a new live post!")])])}],!1,null,"5bff4c27",null);u.options.__file="focus.vue";e.default=u.exports}}]);