(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{360:function(e,t,r){var content=r(371);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("64e55330",content,!0,{sourceMap:!1})},361:function(e,t,r){var content=r(373);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("f90fd602",content,!0,{sourceMap:!1})},362:function(e,t,r){var content=r(379);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("029ee0c6",content,!0,{sourceMap:!1})},363:function(e,t,r){var content=r(381);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("b7a70dba",content,!0,{sourceMap:!1})},366:function(e,t,r){"use strict";var n={name:"DescriptionCard",components:{Card:r(143).a},props:{headerString:{type:String,default:""},subheaderString:{type:String,default:""},subheaderUrl:{type:String,default:""},headerOn:{type:Boolean,default:!0},subheaderOn:{type:Boolean,default:!0}}},o=(r(370),r(1)),component=Object(o.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("Card",{attrs:{"header-string":this.headerString,"subheader-string":this.subheaderString,"subheader-url":this.subheaderUrl,"subheader-on":this.subheaderOn,"header-on":this.headerOn}},[t("div",{staticClass:"description-string"},[this._t("default")],2)])},[],!1,null,"58739659",null);t.a=component.exports},367:function(e,t,r){"use strict";var n={name:"InfoPane"},o=(r(372),r(1)),component=Object(o.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"info-pane-container"},[t("div",{staticClass:"wrapper-margin wrapper-container"},[this._t("default")],2)])},[],!1,null,"e86be0c0",null);t.a=component.exports},370:function(e,t,r){"use strict";var n=r(360);r.n(n).a},371:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".description-string[data-v-58739659]{font-family:Helvetica Neue;font-size:.75em;color:#999;padding:8px}",""])},372:function(e,t,r){"use strict";var n=r(361);r.n(n).a},373:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".info-pane-container[data-v-e86be0c0]{width:100%;margin-left:5%}.wrapper-container[data-v-e86be0c0]{display:flex;flex-direction:column;align-items:center;width:100%}.wrapper-margin>*[data-v-e86be0c0]{margin-bottom:10px}",""])},375:function(e,t,r){"use strict";var n={name:"KowButton",props:{nativeType:{type:String,default:"button"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1}},computed:{buttonDisabled:function(){return this.disabled}},methods:{handleClick:function(e){this.$emit("edit-button-clicked",e)}}},o=(r(378),r(1)),component=Object(o.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"kow-button",attrs:{disabled:this.buttonDisabled,autofocus:this.autofocus,type:this.nativeType},on:{click:this.handleClick}},[this.$slots.default?t("span",[this._t("default")],2):this._e()])},[],!1,null,"65d41678",null);t.a=component.exports},376:function(e,t,r){"use strict";r(28);var n={name:"ProfileCard",props:{name:{type:String,default:""},username:{type:String,default:""},profilePictureUrl:{type:String,default:""},subheaderString:{type:String,default:"test"},subheaderUrl:{type:String,default:"/about"},stats:{type:Array,default:function(){return[]}},type:{type:String,default:""},isMobile:{type:Boolean,default:!1}},computed:{getStatInfoByIndex:function(i){return this.stats[i].name},getRoute:function(){return"project"===this.type?"/dev/project/".concat(this.username):"/dev/user/".concat(this.username)}}},o=(r(380),r(1)),component=Object(o.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card profile-card-container"},[r("nuxt-link",{attrs:{to:e.getRoute}},[r("img",{staticClass:"image",class:{"is-mobile":e.isMobile},attrs:{src:e.profilePictureUrl,onerror:"this.src='https://gradientjoy.com/40'"}})]),e._v(" "),r("nuxt-link",{staticClass:"name font-family",attrs:{to:e.getRoute}},[r("b",[e._v(e._s(e.name))])]),e._v(" "),r("div",{staticClass:"username font-family"},[r("nuxt-link",{staticClass:"username-link",attrs:{to:e.getRoute}},[r("b",[e._v("@"+e._s(e.username))])])],1),e._v(" "),r("div",{staticClass:"level is-marginless",class:{"is-mobile":e.isMobile}},e._l(e.stats,function(t){return r("div",{key:t.name,staticClass:"level-item stat-container is-paddingless"},[r("div",{staticClass:"stat-title"},[r("b",[e._v(e._s(t.name))])]),e._v(" "),r("div",{staticClass:"stat-info"},[r("b",[e._v(e._s(t.stat))])])])}),0),e._v(" "),r("div",{staticClass:"subheader"},[r("nuxt-link",{staticClass:"subheader-content",attrs:{to:e.subheaderUrl}},[r("b",[e._v(e._s(e.subheaderString))])])],1)],1)},[],!1,null,"647080a9",null);t.a=component.exports},378:function(e,t,r){"use strict";var n=r(362);r.n(n).a},379:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".kow-button[data-v-65d41678]{height:35px;border-radius:6px;background-color:#fff;border:1px solid #e0dddd;font-family:Helvetica Neue;color:#39c9a0;font-size:.875em;cursor:pointer}.kow-button[data-v-65d41678]:hover{background-color:rgba(57,201,160,.75);border:1px solid #2f8168;color:#fff}.kow-button[data-v-65d41678]:focus{outline:none}",""])},380:function(e,t,r){"use strict";var n=r(363);r.n(n).a},381:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".profile-card-container[data-v-647080a9]{display:flex;width:100%;text-align:center;align-items:center;flex-direction:column;background-color:#fff;border-radius:6px;height:auto}.image[data-v-647080a9]{border-radius:6px;margin-top:16px;margin-bottom:8px;height:86px;width:86px;border:1px solid #e0dddd}.image.is-mobile[data-v-647080a9]{height:48px;width:48px}.font-family[data-v-647080a9]{font-family:Helvetica Neue}.font-family[data-v-647080a9],.name[data-v-647080a9]{text-decoration:none}.name[data-v-647080a9]{font-size:1em;color:#000;text-align:center}.username[data-v-647080a9]{margin-top:-4px;font-size:.75em;color:#999}.username[data-v-647080a9]:hover{color:#39c9a0;cursor:pointer}.stat-container[data-v-647080a9]{display:flex;flex-direction:column;width:48px}.stat-title[data-v-647080a9]{font-size:.75em;color:#000}.stat-info[data-v-647080a9]{margin-top:-2px;font-size:1em;color:#39c9a0}.subheader[data-v-647080a9]{border-top:1px solid #e0dddd;padding-top:4px;padding-bottom:4px;width:100%;text-align:center;vertical-align:middle}.subheader-content[data-v-647080a9]{font-family:Helvetica Neue;font-size:.75em;color:#39c9a0}.subheader-content[data-v-647080a9]:hover{text-decoration:underline}.username-link[data-v-647080a9]{font-family:Helvetica Neue;font-size:1em;color:#999;text-decoration:none;cursor:pointer}.username-link[data-v-647080a9]:hover{text-decoration:underline;color:#39c9a0}",""])},415:function(e,t,r){var content=r(474);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("4377abef",content,!0,{sourceMap:!1})},473:function(e,t,r){"use strict";var n=r(415);r.n(n).a},474:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".card[data-v-14334e6c]{border-radius:6px}.button.action[data-v-14334e6c]{color:#fff;background-color:#39c9a0;border-color:#39c9a0;margin-bottom:1.75em}.profilePic img[data-v-14334e6c]{width:180px;height:180px;border-radius:6px;-o-object-fit:cover;object-fit:cover}.profilePicSection[data-v-14334e6c]{text-align:center}",""])},495:function(e,t,r){"use strict";r.r(t);r(20);var n=r(4),o=r(62),l=r(142),c=r(141),d=r(61),f=r(376),m=r(366),h=r(367),v=r(143),x=r(80),y=(r(375),r(386),r(388),r(115),r(114),r(140),{name:"EditProfileForm",props:{firstName:{type:String,default:""},lastName:{type:String,default:""},username:{type:String,default:""},profilePicture:{type:String,default:""},description:{type:String,default:""},profileId:{type:String,default:""}},data:function(){return{file:"",editForm:{firstName:this.firstName,lastName:this.lastName,username:this.username,description:this.description,profilePicture:this.profilePicture}}},methods:{selectFile:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.file=this.$refs.file.files[0],t=new FileReader,r=this,t.onload=function(e){r.editForm.profilePicture=e.target.result},t.readAsDataURL(this.file);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),uploadImage:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,image;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",this.file),t.append("picType","user"),e.prev=3,e.next=6,this.$axios.$post("/api/v1/profilePicUpload",t);case 6:image=e.sent,this.editForm.profilePicture=image.file,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),this.$toast.open({duration:5e3,message:"There was an error uploading your profile picture. Please try again.",position:"is-top",type:"is-danger"});case 14:case"end":return e.stop()}},e,this,[[3,10]])}));return function(){return e.apply(this,arguments)}}(),editProfile:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.profilePicture===t.profilePicture){e.next=4;break}return e.next=3,this.uploadImage();case 3:this.profilePicture.includes("https://kowalla-dev")&&(r=this.profilePicture.split("profile-pics/")[1],this.$axios.$post("/api/v1/imageDelete",{bucket:"kowalla-dev/user/profile-pics",fileName:r}));case 4:return e.prev=4,e.next=7,this.$axios.$put("api/v1/profiles/".concat(this.profileId),{firstName:t.firstName,lastName:t.lastName,username:t.username,description:t.description,profilePicture:t.profilePicture});case 7:n=e.sent,o={firstName:n.firstName,lastName:n.lastName,profilePicture:n.profilePicture,description:n.description,username:n.username},this.$store.commit("user/editProfile",o),this.$router.push({path:"/dev/user/".concat(n.username)}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,this,[[4,13]])}));return function(t){return e.apply(this,arguments)}}()}}),_=(r(473),r(1)),P=Object(_.a)(y,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("section",[r("div",{staticClass:"title"},[e._v("Edit Profile")]),e._v(" "),r("b-field",{attrs:{label:"Your first name"}},[r("b-input",{attrs:{maxlength:"20"},model:{value:e.editForm.firstName,callback:function(t){e.$set(e.editForm,"firstName",t)},expression:"editForm.firstName"}})],1),e._v(" "),r("b-field",{attrs:{label:"Your last name"}},[r("b-input",{attrs:{maxlength:"20"},model:{value:e.editForm.lastName,callback:function(t){e.$set(e.editForm,"lastName",t)},expression:"editForm.lastName"}})],1),e._v(" "),r("b-field",{attrs:{label:"Your username"}},[r("b-input",{attrs:{maxlength:"20"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),e._v(" "),r("b-field",{attrs:{label:"Profile Picture"}}),e._v(" "),r("div",{staticClass:"profilePicSection"},[r("p",{staticClass:"profilePic"},[r("img",{attrs:{src:e.editForm.profilePicture,onerror:"this.src='https://gradientjoy.com/180'"}})]),e._v(" "),r("a",{staticClass:"button action"},[r("input",{ref:"file",staticClass:"file-input",attrs:{type:"file"},on:{change:function(t){return e.selectFile()}}}),e._v(" "),e.editForm.profilePicture?r("span",[e._v("Change Profile Picture")]):r("span",[e._v("Add Profile Picture")]),e._v("  \n        "),r("font-awesome-icon",{attrs:{icon:"camera"}})],1)]),e._v(" "),r("b-field",{attrs:{label:"Description"}},[r("b-input",{attrs:{maxlength:"500",type:"textarea"},model:{value:e.editForm.description,callback:function(t){e.$set(e.editForm,"description",t)},expression:"editForm.description"}})],1),e._v(" "),r("a",{staticClass:"button action",on:{click:function(t){return e.editProfile(e.editForm)}}},[e._v("\n      Submit\n    ")])],1)])},[],!1,null,"14334e6c",null).exports,k={name:"Edit",components:{NavPane:c.a,NavCard:x.a,Card:v.a,EditProfileForm:P,Header:d.a,ProfileCard:f.a,InfoPane:h.a,DescriptionCard:m.a,MobileHeader:o.a,MobileFooter:l.a},data:function(){return{profileId:"",firstName:"",lastName:"",profilePictureUrl:"",profileDescription:"",infoRes:!1}},computed:{username:function(){return this.$route.params.username},sort:function(){return this.$store.state.sorting.profile},activeTab:function(){return this.$store.state.activeTabs.ProfileSettingsActiveTab}},mounted:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.username!==this.$store.state.user.username&&this.$router.push({path:"/dev/user/".concat(this.username)}),e.next=3,this.$axios.$get("/api/v1/profiles/user/".concat(this.username));case 3:this.infoRes=e.sent,this.firstName=this.infoRes.firstName,this.lastName=this.infoRes.lastName,this.profileDescription=this.infoRes.description,this.profilePictureUrl=this.infoRes.profilePicture,this.profileId=this.infoRes._id,document.title="Kowalla - Edit Profile";case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{}},C=Object(_.a)(k,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"screen background-tint"},[r("div",{staticClass:"container is-fullhd is-hidden-touch"},[r("div",{staticClass:"columns is-marginless main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[r("div",{staticClass:"column is-one-quarter is-paddingless side-pane"},[r("NavPane")],1),e._v(" "),r("div",{staticClass:"column is-one-half is-paddingless"},[r("b-tabs",{attrs:{id:"columnTabs"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("b-tab-item",[e.infoRes?r("EditProfileForm",{attrs:{"first-name":e.firstName,"last-name":e.lastName,username:e.username,"profile-picture":e.profilePictureUrl,description:e.profileDescription,"profile-id":e.profileId}}):e._e()],1),e._v(" "),r("b-tab-item",[e._v("\n            Test!\n          ")])],1)],1),e._v(" "),r("div",{staticClass:"column is-one-quarter is-paddingless"})])]),e._v(" "),r("div",{staticClass:"columns is-marginless is-hidden-desktop mobile-main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[r("b-tabs",{attrs:{id:"columnTabs"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("b-tab-item",[e.infoRes?r("EditProfileForm",{attrs:{"first-name":e.firstName,"last-name":e.lastName,username:e.username,"profile-picture":e.profilePictureUrl,description:e.profileDescription,"profile-id":e.profileId}}):e._e()],1),e._v(" "),r("b-tab-item",[e._v("\n        Test!\n      ")])],1)],1)])},[],!1,null,null,null);t.default=C.exports}}]);