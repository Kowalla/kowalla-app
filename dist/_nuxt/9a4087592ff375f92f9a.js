(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{359:function(t,e,n){var content=n(369);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("32ac2e46",content,!0,{sourceMap:!1})},360:function(t,e,n){var content=n(371);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("64e55330",content,!0,{sourceMap:!1})},361:function(t,e,n){var content=n(373);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("f90fd602",content,!0,{sourceMap:!1})},362:function(t,e,n){var content=n(379);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("029ee0c6",content,!0,{sourceMap:!1})},363:function(t,e,n){var content=n(381);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("b7a70dba",content,!0,{sourceMap:!1})},364:function(t,e,n){var content=n(383);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("17d38326",content,!0,{sourceMap:!1})},365:function(t,e,n){var content=n(385);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("6f712bae",content,!0,{sourceMap:!1})},366:function(t,e,n){"use strict";var r={name:"DescriptionCard",components:{Card:n(143).a},props:{headerString:{type:String,default:""},subheaderString:{type:String,default:""},subheaderUrl:{type:String,default:""},headerOn:{type:Boolean,default:!0},subheaderOn:{type:Boolean,default:!0}}},o=(n(370),n(1)),component=Object(o.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("Card",{attrs:{"header-string":this.headerString,"subheader-string":this.subheaderString,"subheader-url":this.subheaderUrl,"subheader-on":this.subheaderOn,"header-on":this.headerOn}},[e("div",{staticClass:"description-string"},[this._t("default")],2)])},[],!1,null,"58739659",null);e.a=component.exports},367:function(t,e,n){"use strict";var r={name:"InfoPane"},o=(n(372),n(1)),component=Object(o.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info-pane-container"},[e("div",{staticClass:"wrapper-margin wrapper-container"},[this._t("default")],2)])},[],!1,null,"e86be0c0",null);e.a=component.exports},368:function(t,e,n){"use strict";var r=n(359);n.n(r).a},369:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".profile-card-container[data-v-28930ce0]{width:18%;background-color:#fff;border-radius:6px}.cardTitle[data-v-28930ce0]{padding:.25em;font-size:1.5em;text-align:center;font-weight:700;color:#fff;border-radius:6px 6px 0 0}.cardTitle[data-v-28930ce0],.lower[data-v-28930ce0]{background-color:#0a2049}.lower[data-v-28930ce0]{display:flex;align-items:center;flex-direction:column;padding:0 1em 1em;color:#000;border-radius:0 0 6px 6px}.lower div.row[data-v-28930ce0]{display:flex;flex-direction:row}.image img[data-v-28930ce0]{border-radius:6px}#twitter[data-v-28930ce0]{margin-right:1em}.button.action[data-v-28930ce0]{font-weight:700;width:12em;color:#0a2049;background-color:#fff;border-color:#fff;margin-top:1em}.button.action[data-v-28930ce0]:hover{cursor:pointer;-webkit-animation:jelly-data-v-28930ce0 .5s;animation:jelly-data-v-28930ce0 .5s}@-webkit-keyframes jelly-data-v-28930ce0{0%,to{-webkit-transform:scale(1);transform:scale(1)}25%{-webkit-transform:scale(.9,1.1);transform:scale(.9,1.1)}50%{-webkit-transform:scale(1.1,.9);transform:scale(1.1,.9)}75%{-webkit-transform:scale(.95,1.05);transform:scale(.95,1.05)}}@keyframes jelly-data-v-28930ce0{0%,to{-webkit-transform:scale(1);transform:scale(1)}25%{-webkit-transform:scale(.9,1.1);transform:scale(.9,1.1)}50%{-webkit-transform:scale(1.1,.9);transform:scale(1.1,.9)}75%{-webkit-transform:scale(.95,1.05);transform:scale(.95,1.05)}}",""])},370:function(t,e,n){"use strict";var r=n(360);n.n(r).a},371:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".description-string[data-v-58739659]{font-family:Helvetica Neue;font-size:.75em;color:#999;padding:8px}",""])},372:function(t,e,n){"use strict";var r=n(361);n.n(r).a},373:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".info-pane-container[data-v-e86be0c0]{width:100%;margin-left:5%}.wrapper-container[data-v-e86be0c0]{display:flex;flex-direction:column;align-items:center;width:100%}.wrapper-margin>*[data-v-e86be0c0]{margin-bottom:10px}",""])},374:function(t,e,n){"use strict";n(20);var r=n(4),o=n(15),c=n.n(o),l=n(60),d={name:"SignupCard",components:{},methods:{cardModal:function(){this.$modal.open({parent:this,component:l.a,width:900,hasModalCard:!0,props:{initialState:!1}})},getTwitterCreds:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$post("api/v1/twitter/signin");case 2:e=t.sent,c.a.set("firstVisit",!0),c.a.set("twitterToken",e.oauth_token),window.location="https://api.twitter.com/oauth/authenticate?oauth_token=".concat(e.oauth_token);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},m=(n(368),n(1)),component=Object(m.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card profile-card-container"},[n("h1",{staticClass:"cardTitle"},[t._v("\n    Join Kowalla\n  ")]),t._v(" "),n("div",{staticClass:"lower"},[n("div",{staticClass:"row"},[n("a",{staticClass:"image is-48x48",attrs:{id:"twitter"},on:{click:t.getTwitterCreds}},[n("img",{attrs:{src:"https://seeklogo.com/images/T/twitter-2012-negative-logo-5C6C1F1521-seeklogo.com.png"}})]),t._v(" "),t._m(0)]),t._v(" "),n("a",{staticClass:"button action",on:{click:t.cardModal}},[t._v("Sign Up")])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"image is-48x48",attrs:{id:"github",href:"https://github.com/login/oauth/authorize?client_id=95399e4009a5d2353d00"}},[e("img",{attrs:{src:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"}})])}],!1,null,"28930ce0",null);e.a=component.exports},375:function(t,e,n){"use strict";var r={name:"KowButton",props:{nativeType:{type:String,default:"button"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1}},computed:{buttonDisabled:function(){return this.disabled}},methods:{handleClick:function(t){this.$emit("edit-button-clicked",t)}}},o=(n(378),n(1)),component=Object(o.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"kow-button",attrs:{disabled:this.buttonDisabled,autofocus:this.autofocus,type:this.nativeType},on:{click:this.handleClick}},[this.$slots.default?e("span",[this._t("default")],2):this._e()])},[],!1,null,"65d41678",null);e.a=component.exports},376:function(t,e,n){"use strict";n(28);var r={name:"ProfileCard",props:{name:{type:String,default:""},username:{type:String,default:""},profilePictureUrl:{type:String,default:""},subheaderString:{type:String,default:"test"},subheaderUrl:{type:String,default:"/about"},stats:{type:Array,default:function(){return[]}},type:{type:String,default:""},isMobile:{type:Boolean,default:!1}},computed:{getStatInfoByIndex:function(i){return this.stats[i].name},getRoute:function(){return"project"===this.type?"/dev/project/".concat(this.username):"/dev/user/".concat(this.username)}}},o=(n(380),n(1)),component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card profile-card-container"},[n("nuxt-link",{attrs:{to:t.getRoute}},[n("img",{staticClass:"image",class:{"is-mobile":t.isMobile},attrs:{src:t.profilePictureUrl,onerror:"this.src='https://gradientjoy.com/40'"}})]),t._v(" "),n("nuxt-link",{staticClass:"name font-family",attrs:{to:t.getRoute}},[n("b",[t._v(t._s(t.name))])]),t._v(" "),n("div",{staticClass:"username font-family"},[n("nuxt-link",{staticClass:"username-link",attrs:{to:t.getRoute}},[n("b",[t._v("@"+t._s(t.username))])])],1),t._v(" "),n("div",{staticClass:"level is-marginless",class:{"is-mobile":t.isMobile}},t._l(t.stats,function(e){return n("div",{key:e.name,staticClass:"level-item stat-container is-paddingless"},[n("div",{staticClass:"stat-title"},[n("b",[t._v(t._s(e.name))])]),t._v(" "),n("div",{staticClass:"stat-info"},[n("b",[t._v(t._s(e.stat))])])])}),0),t._v(" "),n("div",{staticClass:"subheader"},[n("nuxt-link",{staticClass:"subheader-content",attrs:{to:t.subheaderUrl}},[n("b",[t._v(t._s(t.subheaderString))])])],1)],1)},[],!1,null,"647080a9",null);e.a=component.exports},378:function(t,e,n){"use strict";var r=n(362);n.n(r).a},379:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".kow-button[data-v-65d41678]{height:35px;border-radius:6px;background-color:#fff;border:1px solid #e0dddd;font-family:Helvetica Neue;color:#39c9a0;font-size:.875em;cursor:pointer}.kow-button[data-v-65d41678]:hover{background-color:rgba(57,201,160,.75);border:1px solid #2f8168;color:#fff}.kow-button[data-v-65d41678]:focus{outline:none}",""])},380:function(t,e,n){"use strict";var r=n(363);n.n(r).a},381:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".profile-card-container[data-v-647080a9]{display:flex;width:100%;text-align:center;align-items:center;flex-direction:column;background-color:#fff;border-radius:6px;height:auto}.image[data-v-647080a9]{border-radius:6px;margin-top:16px;margin-bottom:8px;height:86px;width:86px;border:1px solid #e0dddd}.image.is-mobile[data-v-647080a9]{height:48px;width:48px}.font-family[data-v-647080a9]{font-family:Helvetica Neue}.font-family[data-v-647080a9],.name[data-v-647080a9]{text-decoration:none}.name[data-v-647080a9]{font-size:1em;color:#000;text-align:center}.username[data-v-647080a9]{margin-top:-4px;font-size:.75em;color:#999}.username[data-v-647080a9]:hover{color:#39c9a0;cursor:pointer}.stat-container[data-v-647080a9]{display:flex;flex-direction:column;width:48px}.stat-title[data-v-647080a9]{font-size:.75em;color:#000}.stat-info[data-v-647080a9]{margin-top:-2px;font-size:1em;color:#39c9a0}.subheader[data-v-647080a9]{border-top:1px solid #e0dddd;padding-top:4px;padding-bottom:4px;width:100%;text-align:center;vertical-align:middle}.subheader-content[data-v-647080a9]{font-family:Helvetica Neue;font-size:.75em;color:#39c9a0}.subheader-content[data-v-647080a9]:hover{text-decoration:underline}.username-link[data-v-647080a9]{font-family:Helvetica Neue;font-size:1em;color:#999;text-decoration:none;cursor:pointer}.username-link[data-v-647080a9]:hover{text-decoration:underline;color:#39c9a0}",""])},382:function(t,e,n){"use strict";var r=n(364);n.n(r).a},383:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".sub-button[data-v-72fdeaca]{height:45px;width:180px;border-radius:6px;border:2px solid #2f8168;margin:6px;font-family:Helvetica Neue;font-size:.875em;cursor:pointer}.sub-button[data-v-72fdeaca]:focus{outline:none}.is-subscribed[data-v-72fdeaca]{color:#fff;background-color:#39c9a0}.is-subscribed[data-v-72fdeaca]:hover{border:2px solid #fff}.is-not-subscribed[data-v-72fdeaca]{color:#39c9a0;background-color:#fff}.is-not-subscribed[data-v-72fdeaca]:hover{border:2px solid #39c9a0}",""])},384:function(t,e,n){"use strict";var r=n(365);n.n(r).a},385:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".banner-container[data-v-146b9957]{position:relative;height:300px;display:flex;flex-direction:column}.banner-container.isMobile[data-v-146b9957]{height:auto}.image[data-v-146b9957]{display:block;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.banner-title[data-v-146b9957]{position:absolute;left:0;bottom:0;margin-right:60px;padding-left:15px;width:100%;height:75px;background-color:rgba(0,0,0,.5);color:#fff;display:flex;justify-content:flex-start;align-items:center}.banner-title-mobile[data-v-146b9957]{height:auto}.banner-font-desktop[data-v-146b9957]{font-size:3.75em}.banner-font-mobile[data-v-146b9957]{font-size:1.5em}.banner-container img[data-v-146b9957]{-o-object-fit:cover;object-fit:cover;min-width:100%;min-height:100%}.banner-subscription-button-container[data-v-146b9957]{position:absolute;top:15px;right:15px}",""])},387:function(t,e,n){"use strict";var r={name:"SubscriptionButton",props:{isSubscribed:{type:Boolean,default:!1},isProject:{type:Boolean,default:!1},id:{type:String,default:""}},computed:{getClasses:function(){return{"is-subscribed":this.isSubscribed,"is-not-subscribed":!this.isSubscribed}},getText:function(){return this.isSubscribed?"Subscribed":"Subscribe"}},methods:{handleClick:function(){if(this.isSubscribed){var t=this.isProject?"projects":"communities";this.$axios.$delete("/api/v1/profiles/".concat(this.$store.state.user._id,"/subs/").concat(t,"/").concat(this.id))}else this.$axios.$post("/api/v1/profiles/".concat(this.$store.state.user._id,"/subs"),{projectId:this.isProject?this.id:void 0,communityId:this.isProject?void 0:this.id});this.$emit("subscription-button-clicked",!this.isSubscribed)}}},o=(n(382),n(1)),c={name:"Banner",components:{SubscriptionButton:Object(o.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"sub-button",class:this.getClasses,on:{click:this.handleClick}},[e("b",[this._v(this._s(this.getText))])])},[],!1,null,"72fdeaca",null).exports},props:{id:{type:String,default:""},bannerUrl:{type:String,default:""},bannerTitle:{type:String,default:""},bannerTitlePrefix:{type:String,default:""},isSubscribed:{type:Boolean,default:!1},isOwner:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1}},methods:{handleClick:function(t){this.$emit("subscription-button-clicked",t)}}},l=(n(384),Object(o.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner-container",class:{isMobile:t.isMobile}},[n("img",{attrs:{src:t.bannerUrl,onerror:"this.src='https://gradientjoy.com/1000x300'"}}),t._v(" "),n("div",{staticClass:"banner-subscription-button-container"},[t.isOwner?t._e():n("SubscriptionButton",{attrs:{"is-subscribed":t.isSubscribed,"is-project":"@"===t.bannerTitlePrefix,id:t.id},on:{"subscription-button-clicked":t.handleClick}})],1),t._v(" "),n("div",{staticClass:"banner-title",class:{"banner-font-desktop":!t.isMobile,"banner-font-mobile":t.isMobile,"banner-title-desktop":!t.isMobile,"banner-title-mobile":t.isMobile}},[n("b",[t._v(t._s(t.bannerTitlePrefix)+t._s(t.bannerTitle))])])])},[],!1,null,"146b9957",null));e.a=l.exports},406:function(t,e,n){var content=n(456);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("9256ff2a",content,!0,{sourceMap:!1})},407:function(t,e,n){var content=n(458);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("7a080bc2",content,!0,{sourceMap:!1})},455:function(t,e,n){"use strict";var r=n(406);n.n(r).a},456:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".box[data-v-b6c5442a]{width:800px;max-width:100%}.modal-content[data-v-b6c5442a]{border-radius:6px;margin:0;color:#39c9a0;width:auto}.button.action[data-v-b6c5442a]{color:#fff;background-color:#39c9a0;border-color:#39c9a0;margin-bottom:1.75em}.profilePic img[data-v-b6c5442a]{width:180px;height:180px;border-radius:6px;-o-object-fit:cover;object-fit:cover}.picSection[data-v-b6c5442a]{text-align:center}.bannerPic img[data-v-b6c5442a]{width:1000px;max-width:100%;max-height:250px;-o-object-fit:cover;object-fit:cover}",""])},457:function(t,e,n){"use strict";var r=n(407);n.n(r).a},458:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".mobile-main-margin[data-v-46a321d2]{padding-top:100px!important}.card-container[data-v-46a321d2]{margin-bottom:0}.fullWidth[data-v-46a321d2]{width:100%!important}",""])},491:function(t,e,n){"use strict";n.r(e);n(39),n(29);var r=n(18),o=(n(20),n(4)),c=(n(28),n(61)),l=n(62),d=n(142),m=n(141),f=n(387),h=n(366),v=n(367),x=n(375),y=(n(115),n(114),n(140),{name:"CreateSpaceModal",props:{name:{type:String,default:""},headerPicture:{type:String,default:""},profilePicture:{type:String,default:""},description:{type:String,default:""},communityId:{type:String,default:""}},data:function(){return{profilePicFile:"",bannerPicFile:"",editForm:{name:"",description:"",profilePicture:"",headerPicture:"",admins:[]}}},mounted:function(){this.editForm.name=this.name,this.editForm.headerPicture=this.headerPicture,this.editForm.profilePicture=this.profilePicture,this.editForm.description=this.description},methods:{selectFile:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:"profile"===e?this.profilePicFile=this.$refs.profilePicFile.files[0]:this.bannerPicFile=this.$refs.bannerPicFile.files[0],n=new FileReader,r=this,n.onload=function(t){"profile"===e?r.editForm.profilePicture=t.target.result:r.editForm.headerPicture=t.target.result},"profile"===e?n.readAsDataURL(this.profilePicFile):n.readAsDataURL(this.bannerPicFile);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),uploadImage:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){var n,image,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=new FormData).append("picType","community"),"profile"!==e){t.next=17;break}return t.prev=3,n.append("file",this.profilePicFile),t.next=7,this.$axios.$post("/api/v1/profilePicUpload",n);case 7:image=t.sent,this.editForm.profilePicture=image.file,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),this.$toast.open({duration:5e3,message:"There was an error uploading your profile picture. Please try again.",position:"is-top",type:"is-danger"});case 15:t.next=29;break;case 17:return n.append("file",this.bannerPicFile),t.prev=18,t.next=21,this.$axios.$post("/api/v1/bannerPicUpload",n);case 21:r=t.sent,this.editForm.headerPicture=r.file,t.next=29;break;case 25:t.prev=25,t.t1=t.catch(18),console.log(t.t1),this.$toast.open({duration:5e3,message:"There was an error uploading your banner picture. Please try again.",position:"is-top",type:"is-danger"});case 29:case"end":return t.stop()}},t,this,[[3,11],[18,25]])}));return function(e){return t.apply(this,arguments)}}(),editCommunity:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){var n,r,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.profilePicture===e.profilePicture){t.next=4;break}return t.next=3,this.uploadImage();case 3:this.profilePicture.includes("https://kowalla-dev")&&(n=this.profilePicture.split("profile-pics/")[1],this.$axios.$post("/api/v1/imageDelete",{bucket:"kowalla-dev/community/profile-pics",fileName:n}));case 4:if(this.headerPicture===e.headerPicture){t.next=8;break}return t.next=7,this.uploadImage("banner");case 7:this.headerPicture.includes("https://kowalla-dev")&&(r=this.profilePicture.split("profile-pics/")[1],this.$axios.$post("/api/v1/imageDelete",{bucket:"kowalla-dev/community/banner-pics",fileName:r}));case 8:return t.prev=8,t.next=11,this.$axios.put("api/v1/communities/".concat(this.communityId),{name:e.name,description:e.description,profilePicture:e.profilePicture,headerPicture:e.headerPicture});case 11:o=t.sent,c={name:o.name,pictureUrl:o.profilePicture,communityId:o._id},this.$store.commit("user/editOwned",c),o.name!==this.name?this.$router.push({path:"/dev/community/".concat(o.name)}):this.$router.go(),this.$parent.close(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(8),console.log(t.t0);case 21:case"end":return t.stop()}},t,this,[[8,18]])}));return function(e){return t.apply(this,arguments)}}()}}),w=(n(455),n(1)),_=Object(w.a)(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-content"},[n("div",{staticClass:"box"},[n("section",[n("div",{staticClass:"title"},[t._v("Edit "+t._s(t.name))]),t._v(" "),n("b-field",{attrs:{label:"Community name"}},[n("b-input",{attrs:{maxlength:"20"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),n("b-field",{attrs:{label:"Profile Picture"}}),t._v(" "),n("div",{staticClass:"picSection"},[n("p",{staticClass:"profilePic"},[n("img",{attrs:{src:t.editForm.profilePicture,onerror:"this.src='https://gradientjoy.com/180'"}})]),t._v(" "),n("a",{staticClass:"button action"},[n("input",{ref:"profilePicFile",staticClass:"file-input",attrs:{type:"file"},on:{change:function(e){return t.selectFile("profile")}}}),t._v(" "),t.editForm.profilePicture?n("span",[t._v("Change Profile Picture")]):n("span",[t._v("Add Profile Picture")]),t._v("  \n          "),n("font-awesome-icon",{attrs:{icon:"camera"}})],1)]),t._v(" "),n("b-field",{attrs:{label:"Banner Picture"}}),t._v(" "),n("div",{staticClass:"picSection"},[n("p",{staticClass:"bannerPic"},[n("img",{attrs:{src:t.editForm.headerPicture,onerror:"this.src='https://gradientjoy.com/1000x250'"}})]),t._v(" "),n("a",{staticClass:"button action"},[n("input",{ref:"bannerPicFile",staticClass:"file-input",attrs:{type:"file"},on:{change:function(e){return t.selectFile("banner")}}}),t._v(" "),t.editForm.headerPicture?n("span",[t._v("Change Banner Picture")]):n("span",[t._v("Add Banner Picture")]),t._v("  \n          "),n("font-awesome-icon",{attrs:{icon:"camera"}})],1)]),t._v(" "),n("b-field",{attrs:{label:"Description"}},[n("b-input",{attrs:{maxlength:"500",type:"textarea"},model:{value:t.editForm.description,callback:function(e){t.$set(t.editForm,"description",e)},expression:"editForm.description"}})],1),t._v(" "),n("a",{staticClass:"button action",on:{click:function(e){return t.editCommunity(t.editForm)}}},[t._v("\n        Submit\n      ")])],1)])])},[],!1,null,"b6c5442a",null).exports,P=n(376),k=n(386),C=n(422),S=n(388),$={name:"UserPageTest",components:{SignupCard:n(374).a,EmptyPostList:S.a,Header:c.a,MobileHeader:l.a,MobileFooter:d.a,NavPane:m.a,Banner:f.a,DescriptionCard:h.a,ProfileCard:P.a,InfoPane:v.a,EditButton:x.a,EditCommunityModal:_,Post:k.a},data:function(){return{communityName:"",bannerPictureUrl:"",profilePictureUrl:"",communityDescription:"",adminId:"",numSubs:"",communityId:"",communityStats:[],isNestedUrl:!1,postList:[]}},computed:{getCommunityName:function(){return this.communityName},sort:function(){return this.$store.state.sorting.community},isOwner:function(){var t=!1;if(void 0!==this.$store.state.user.owned)for(var i=0;i<this.$store.state.user.owned.length;i++)this.$store.state.user.owned[i].name===this.communityName&&(t=!0);return t},isSubscribed:function(){var t=!1;if(void 0!==this.$store.state.user.subscriptions)for(var i=0;i<this.$store.state.user.subscriptions.length;i++)this.$store.state.user.subscriptions[i].name===this.communityName&&(t=!0);return t}},watch:{sort:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$get("/api/v1/community/posts/".concat(this.communityId,"/").concat(this.sort,"/0"));case 2:return this.postList=t.sent,t.next=5,this.scroll();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.communityName=this.$route.params.communityname,this.$route.params.hasOwnProperty("postId")&&(this.isNestedUrl=!0)},mounted:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/v1/communities/community/".concat(this.communityName));case 2:if(e=t.sent,this.bannerPictureUrl=e.data.headerPicture,this.profilePictureUrl=e.data.profilePicture,this.communityId=e.data._id,this.numSubs=e.data.subscribers,this.communityDescription=e.data.description,this.adminId=e.data.admins[0],this.communityStats.push({name:"Subs",stat:e.data.subscribers}),this.communityStats.push({name:"Posts",stat:e.data.postCount}),!this.isNestedUrl){t.next=16;break}return t.next=14,this.$axios.$get("/api/v1/posts/".concat(this.$route.params.postId));case 14:n=t.sent,this.$modal.open({parent:this,component:C.a,props:{postObj:n,isFromNestedUrl:!0,fallbackUrl:"/dev/community/".concat(this.communityName)},events:{"delete-post":function(t){r.removePostFromPostList(t)}},width:900,hasModalCard:!0});case 16:return t.next=18,this.$axios.$get("/api/v1/community/posts/".concat(this.communityId,"/").concat(this.sort,"/").concat(this.postList.length));case 18:return this.postList=t.sent,console.log(this.postList.length),t.next=22,this.scroll();case 22:document.title="Kowalla - #".concat(this.communityName);case 23:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{scroll:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.postList.length&&(e=!1,window.onscroll=Object(o.a)(regeneratorRuntime.mark(function t(){var r,o,c,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.getElementById("postFeed"),o=window.innerHeight+window.scrollY>=r.offsetHeight-300,e||!o){t.next=15;break}return e=!0,t.next=6,n.$axios.$get("/api/v1/community/posts/".concat(n.communityId,"/").concat(n.sort,"/").concat(n.postList.length));case 6:return c=t.sent,t.next=9,n.postList.concat(c);case 9:if(l=t.sent,!c.length){t.next=15;break}return t.next=13,l;case 13:n.postList=t.sent,e=!1;case 15:case"end":return t.stop()}},t)})));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updateSubscriptions:function(t){var e={name:this.communityName,pictureUrl:this.profilePictureUrl,numSubs:t?this.communityStats[0].stat+1:this.communityStats[0].stat-1,communityId:this.communityId},n=Object(r.a)({subBool:t},e);this.communityStats[0].stat=t?this.communityStats[0].stat+1:this.communityStats[0].stat-1,this.$store.dispatch("user/updateSubscriptions",n)},callEditCommunityModal:function(){this.$modal.open({parent:this,component:_,props:{name:this.communityName,headerPicture:this.bannerPictureUrl,profilePicture:this.profilePictureUrl,description:this.communityDescription,communityId:this.communityId},width:900,hasModalCard:!0})},removePostFromPostList:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(this.postList);case 1:if((t.t1=t.t0()).done){t.next=10;break}if(i=t.t1.value,this.postList[i]._id!==e){t.next=8;break}return this.postList.splice(i,1),t.next=7,this.$axios.delete("/api/v1/communities/".concat(this.communityId,"/posts/").concat(e));case 7:return t.abrupt("break",10);case 8:t.next=1;break;case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},j=(n(457),Object(w.a)($,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"screen background-tint"},[n("div",{staticClass:"container is-fullhd is-hidden-touch"},[n("div",{staticClass:"columns is-marginless main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[n("div",{staticClass:"column is-one-quarter is-paddingless side-pane"},[n("NavPane",{staticClass:"fixed"})],1),t._v(" "),n("div",{staticClass:"column is-three-quarters is-paddingless"},[n("Banner",{attrs:{"banner-url":t.bannerPictureUrl,"banner-title":t.communityName,id:t.communityId,"is-subscribed":t.isSubscribed,"is-owner":t.isOwner,"banner-title-prefix":"#"},on:{"subscription-button-clicked":t.updateSubscriptions}}),t._v(" "),n("div",{staticClass:"columns is-marginless newsfeed-padding",attrs:{id:"postFeed"}},[n("div",{staticClass:"column is-two-thirds is-paddingless"},[t.postList.length?t._e():n("EmptyPostList"),t._v(" "),t._l(t.postList,function(e){return n("Post",{key:e._id,attrs:{post:e},on:{"delete-post":t.removePostFromPostList}})})],2),t._v(" "),n("div",{staticClass:"column is-one-third is-paddingless side-pane"},[n("InfoPane",[this.$store.state.user.loggedIn?t._e():n("SignupCard",{staticClass:"fullWidth"}),t._v(" "),n("ProfileCard",{attrs:{name:t.communityName,username:t.communityName,"profile-picture-url":t.profilePictureUrl,"subheader-string":"View "+t.communityName+"'s stats",stats:t.communityStats,type:"project"}}),t._v(" "),n("DescriptionCard",{attrs:{"subheader-on":!1,"header-string":"Description"}},[t._v("\n                "+t._s(t.communityDescription)+"\n              ")]),t._v(" "),this.$store.state.user._id===t.adminId?n("EditButton",{on:{"edit-button-clicked":t.callEditCommunityModal}},[n("b",[t._v("Edit Settings")])]):t._e()],1)],1)])],1)])]),t._v(" "),n("div",{staticClass:"is-marginless is-hidden-desktop mobile-main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[n("Banner",{attrs:{"banner-url":t.bannerPictureUrl,"banner-title":t.communityName,id:t.communityId,"is-subscribed":t.isSubscribed,"is-owner":t.isOwner,"banner-title-prefix":"#","is-mobile":""},on:{"subscription-button-clicked":t.updateSubscriptions}}),t._v(" "),n("DescriptionCard",{staticClass:"newsfeed-margin",attrs:{"subheader-on":!1,"header-string":"Description"}},[t._v("\n      "+t._s(t.communityDescription)+"\n    ")]),t._v(" "),n("div",{staticClass:"side-pane"},[this.$store.state.user._id===t.adminId?n("EditButton",{on:{"edit-button-clicked":t.callEditCommunityModal}},[n("b",[t._v("Edit Settings")])]):t._e()],1),t._v(" "),t.postList.length?t._e():n("EmptyPostList"),t._v(" "),t._l(t.postList,function(e){return n("Post",{key:e._id,staticClass:"newsfeed-margin",attrs:{"is-mobile":!0,post:e},on:{"delete-post":t.removePostFromPostList}})})],2)])},[],!1,null,"46a321d2",null));e.default=j.exports}}]);