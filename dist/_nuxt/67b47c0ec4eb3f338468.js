(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{408:function(t,e,n){var content=n(460);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("e7103eea",content,!0,{sourceMap:!1})},459:function(t,e,n){"use strict";var o=n(408);n.n(o).a},460:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".focusPage[data-v-b16fb9ea]{position:absolute;top:0;left:0;width:100%;height:100%;background-image:url(https://source.unsplash.com/collection/151521);background-size:cover}.container[data-v-b16fb9ea]{height:90%;width:100%;margin:0 auto}.columns[data-v-b16fb9ea]{height:90%}.column[data-v-b16fb9ea],.columns[data-v-b16fb9ea]{max-height:90%}.title[data-v-b16fb9ea]{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;text-align:center;color:#fff}.livePost[data-v-b16fb9ea]{margin:0 auto;padding:1em}.livePost[data-v-b16fb9ea],.liveTimer[data-v-b16fb9ea]{border-radius:6px;background-color:rgba(0,0,0,.35);color:#fff}.liveTimer[data-v-b16fb9ea]{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:10vw;text-align:center;padding:0 .25em}.field[data-v-b16fb9ea]{display:block}.editor__content[data-v-b16fb9ea]{color:#fff;max-height:50vh;overflow-y:scroll;word-wrap:break-word}.is-white[data-v-b16fb9ea]{background-color:transparent;color:#fff}.is-white[data-v-b16fb9ea]:hover{background-color:#e9ebee}.button.action[data-v-b16fb9ea]{font-size:2em;margin:0 auto;background-color:#39c9a0;border-color:#39c9a0}.button.action[data-v-b16fb9ea],.startNew[data-v-b16fb9ea]{color:#fff;border-radius:6px}.startNew[data-v-b16fb9ea]{display:block;text-align:center;background-color:rgba(0,0,0,.35);margin-top:2.25em;padding:.25em}@media only screen and (max-width:600px){.columns[data-v-b16fb9ea]{flex-direction:column-reverse;display:flex}}",""])},500:function(t,e,n){"use strict";n.r(e);n(145),n(146),n(29),n(20);var o=n(4),c=n(7),r=n(14),l=n(61),d=n(58),f={name:"Focus",components:{CreatePostModal:d.a,Header:l.a,Editor:c.a,EditorContent:c.b,EditorMenuBar:c.c},data:function(){return{editor:null,post:{},countUp:""}},mounted:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$get("/api/v1/posts/active/".concat(this.$route.params.username));case 2:if(this.post=t.sent,!0!==this.post.isActive){t.next=8;break}return this.countUpTimer(),t.next=7,new c.a({autoFocus:!0,extensions:[new r.a,new r.c,new r.e,new r.f,new r.g({levels:[1,2,3]}),new r.i,new r.j,new r.m,new r.n,new r.p,new r.q,new r.b,new r.d,new r.k,new r.l,new r.o,new r.r,new r.h],content:this.post.content,onUpdate:function(t){var n=t.getHTML;e.html=n()}});case 7:this.editor=t.sent;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeDestroy:function(){null!==this.editor&&this.editor.destroy()},methods:{cardModal:function(){this.$modal.open({parent:this,component:d.a,props:{reactionsFormatted:this.reactionsFormatted},hasModalCard:!0})},countUpTimer:function(){var t=new Date(this.post.start).getTime(),e=this;setInterval(function(){var n=(new Date).getTime()-t,o=Math.floor(n%864e5/36e5),c=Math.floor(n%36e5/6e4),r=Math.floor(n%6e4/1e3);o=o<10?"0"+o:o,c=c<10?"0"+c:c,30!==(r=r<10?"0"+r:r)&&"00"!==r.toString()||e.updatePost(),e.countUp="".concat(o,":").concat(c,":").concat(r)},1e3)},updatePost:function(){this.$axios.$put("/api/v1/profile/posts/".concat(this.post._id),{content:this.html})},selectFile:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.file=this.$refs.file.files[0],this.sendFile(e);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),sendFile:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){var n,o,image;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearPhoto=!0,(n=new FormData).append("file",this.file),o=this.post.projectId?"project":"community",n.append("type",o),t.prev=5,t.next=8,this.$axios.$post("/api/v1/posts/imageUpload",n);case 8:image=t.sent,this.photoUrl=image.file,e({src:image.file}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0),this.$toast.open({duration:5e3,message:"There was an error with your file. Please confirm it's less than 10MB and a png, jpeg, or gif.",position:"is-top",type:"is-danger"});case 17:case"end":return t.stop()}},t,this,[[5,13]])}));return function(e){return t.apply(this,arguments)}}()}},v=(n(459),n(1)),component=Object(v.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"focusPage"},[t.post.isActive?n("div",{staticClass:"container"},[n("div",{staticClass:"columns is-vcentered is-centered is-marginless main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[n("div",{staticClass:"column"},[n("div",{staticClass:"card livePost"},[t._m(0),t._v(" "),n("div",{staticClass:"media-content"},[n("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.commands,c=e.isActive;return n("div",{staticClass:"field has-addons"},[n("a",{staticClass:"button is-white",class:{"is-active":c.bold()},on:{click:o.bold}},[n("font-awesome-icon",{attrs:{icon:"bold"}})],1),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.italic()},on:{click:o.italic}},[n("font-awesome-icon",{attrs:{icon:"italic"}})],1),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.strike()},on:{click:o.strike}},[n("font-awesome-icon",{attrs:{icon:"strikethrough"}})],1),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.underline()},on:{click:o.underline}},[n("font-awesome-icon",{attrs:{icon:"underline"}})],1),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.code()},on:{click:o.code}},[n("font-awesome-icon",{attrs:{icon:"code"}})],1),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.heading({level:1})},on:{click:function(t){return o.heading({level:1})}}},[t._v("\n                  H1\n                ")]),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.heading({level:2})},on:{click:function(t){return o.heading({level:2})}}},[t._v("\n                  H2\n                ")]),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.heading({level:3})},on:{click:function(t){return o.heading({level:3})}}},[t._v("\n                  H3\n                ")]),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.todo_list()},on:{click:o.todo_list}},[n("font-awesome-icon",{attrs:{icon:"tasks"}})],1),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.bullet_list()},on:{click:o.bullet_list}},[n("font-awesome-icon",{attrs:{icon:"list-ul"}})],1),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.ordered_list()},on:{click:o.ordered_list}},[n("font-awesome-icon",{attrs:{icon:"list-ol"}})],1),t._v(" "),n("a",{staticClass:"button is-white",class:{"is-active":c.blockquote()},on:{click:o.blockquote}},[n("font-awesome-icon",{attrs:{icon:"quote-right"}})],1),t._v(" "),n("a",{staticClass:"button is-white",on:{click:o.horizontal_rule}},[n("font-awesome-icon",{attrs:{icon:"minus"}})],1),t._v(" "),n("a",{staticClass:"button is-white"},[n("input",{ref:"file",staticClass:"file-input",attrs:{type:"file"},on:{change:function(e){return t.selectFile(o.image)}}}),t._v(" "),n("font-awesome-icon",{attrs:{icon:"camera"}})],1)])}}],null,!1,819466088)}),t._v(" "),n("div",{staticClass:"editor content"},[n("editor-content",{staticClass:"editor__content focusEditor",attrs:{editor:t.editor}})],1)],1)])]),t._v(" "),n("div",{staticClass:"column"},[n("div",{staticClass:"card liveTimer"},[n("b",[n("span",{staticClass:"countUp"},[t._v(t._s(t.countUp))])])])])])]):n("div",{staticClass:"container is-size-1"},[n("div",{staticClass:"startNew"},[t._m(1),t._v(" "),n("p",[n("a",{staticClass:"button action",on:{click:function(e){return t.cardModal()}}},[n("b",[t._v("Start")])])])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"is-size-1 title"},[e("b",[this._v("Live Post")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("b",[e("span",[this._v("Start a new live post!")])])}],!1,null,"b16fb9ea",null);e.default=component.exports}}]);