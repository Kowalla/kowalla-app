(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{359:function(t,e,r){var content=r(369);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(11).default)("32ac2e46",content,!0,{sourceMap:!1})},364:function(t,e,r){var content=r(383);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(11).default)("17d38326",content,!0,{sourceMap:!1})},365:function(t,e,r){var content=r(385);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(11).default)("6f712bae",content,!0,{sourceMap:!1})},368:function(t,e,r){"use strict";var n=r(359);r.n(n).a},369:function(t,e,r){(t.exports=r(10)(!1)).push([t.i,".profile-card-container[data-v-28930ce0]{width:18%;background-color:#fff;border-radius:6px}.cardTitle[data-v-28930ce0]{padding:.25em;font-size:1.5em;text-align:center;font-weight:700;color:#fff;border-radius:6px 6px 0 0}.cardTitle[data-v-28930ce0],.lower[data-v-28930ce0]{background-color:#0a2049}.lower[data-v-28930ce0]{display:flex;align-items:center;flex-direction:column;padding:0 1em 1em;color:#000;border-radius:0 0 6px 6px}.lower div.row[data-v-28930ce0]{display:flex;flex-direction:row}.image img[data-v-28930ce0]{border-radius:6px}#twitter[data-v-28930ce0]{margin-right:1em}.button.action[data-v-28930ce0]{font-weight:700;width:12em;color:#0a2049;background-color:#fff;border-color:#fff;margin-top:1em}.button.action[data-v-28930ce0]:hover{cursor:pointer;-webkit-animation:jelly-data-v-28930ce0 .5s;animation:jelly-data-v-28930ce0 .5s}@-webkit-keyframes jelly-data-v-28930ce0{0%,to{-webkit-transform:scale(1);transform:scale(1)}25%{-webkit-transform:scale(.9,1.1);transform:scale(.9,1.1)}50%{-webkit-transform:scale(1.1,.9);transform:scale(1.1,.9)}75%{-webkit-transform:scale(.95,1.05);transform:scale(.95,1.05)}}@keyframes jelly-data-v-28930ce0{0%,to{-webkit-transform:scale(1);transform:scale(1)}25%{-webkit-transform:scale(.9,1.1);transform:scale(.9,1.1)}50%{-webkit-transform:scale(1.1,.9);transform:scale(1.1,.9)}75%{-webkit-transform:scale(.95,1.05);transform:scale(.95,1.05)}}",""])},374:function(t,e,r){"use strict";r(20);var n=r(4),o=r(15),c=r.n(o),l=r(60),d={name:"SignupCard",components:{},methods:{cardModal:function(){this.$modal.open({parent:this,component:l.a,width:900,hasModalCard:!0,props:{initialState:!1}})},getTwitterCreds:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$post("api/v1/twitter/signin");case 2:e=t.sent,c.a.set("firstVisit",!0),c.a.set("twitterToken",e.oauth_token),window.location="https://api.twitter.com/oauth/authenticate?oauth_token=".concat(e.oauth_token);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},m=(r(368),r(1)),component=Object(m.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card profile-card-container"},[r("h1",{staticClass:"cardTitle"},[t._v("\n    Join Kowalla\n  ")]),t._v(" "),r("div",{staticClass:"lower"},[r("div",{staticClass:"row"},[r("a",{staticClass:"image is-48x48",attrs:{id:"twitter"},on:{click:t.getTwitterCreds}},[r("img",{attrs:{src:"https://seeklogo.com/images/T/twitter-2012-negative-logo-5C6C1F1521-seeklogo.com.png"}})]),t._v(" "),t._m(0)]),t._v(" "),r("a",{staticClass:"button action",on:{click:t.cardModal}},[t._v("Sign Up")])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"image is-48x48",attrs:{id:"github",href:"https://github.com/login/oauth/authorize?client_id=95399e4009a5d2353d00"}},[e("img",{attrs:{src:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"}})])}],!1,null,"28930ce0",null);e.a=component.exports},382:function(t,e,r){"use strict";var n=r(364);r.n(n).a},383:function(t,e,r){(t.exports=r(10)(!1)).push([t.i,".sub-button[data-v-72fdeaca]{height:45px;width:180px;border-radius:6px;border:2px solid #2f8168;margin:6px;font-family:Helvetica Neue;font-size:.875em;cursor:pointer}.sub-button[data-v-72fdeaca]:focus{outline:none}.is-subscribed[data-v-72fdeaca]{color:#fff;background-color:#39c9a0}.is-subscribed[data-v-72fdeaca]:hover{border:2px solid #fff}.is-not-subscribed[data-v-72fdeaca]{color:#39c9a0;background-color:#fff}.is-not-subscribed[data-v-72fdeaca]:hover{border:2px solid #39c9a0}",""])},384:function(t,e,r){"use strict";var n=r(365);r.n(n).a},385:function(t,e,r){(t.exports=r(10)(!1)).push([t.i,".banner-container[data-v-146b9957]{position:relative;height:300px;display:flex;flex-direction:column}.banner-container.isMobile[data-v-146b9957]{height:auto}.image[data-v-146b9957]{display:block;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.banner-title[data-v-146b9957]{position:absolute;left:0;bottom:0;margin-right:60px;padding-left:15px;width:100%;height:75px;background-color:rgba(0,0,0,.5);color:#fff;display:flex;justify-content:flex-start;align-items:center}.banner-title-mobile[data-v-146b9957]{height:auto}.banner-font-desktop[data-v-146b9957]{font-size:3.75em}.banner-font-mobile[data-v-146b9957]{font-size:1.5em}.banner-container img[data-v-146b9957]{-o-object-fit:cover;object-fit:cover;min-width:100%;min-height:100%}.banner-subscription-button-container[data-v-146b9957]{position:absolute;top:15px;right:15px}",""])},387:function(t,e,r){"use strict";var n={name:"SubscriptionButton",props:{isSubscribed:{type:Boolean,default:!1},isProject:{type:Boolean,default:!1},id:{type:String,default:""}},computed:{getClasses:function(){return{"is-subscribed":this.isSubscribed,"is-not-subscribed":!this.isSubscribed}},getText:function(){return this.isSubscribed?"Subscribed":"Subscribe"}},methods:{handleClick:function(){if(this.isSubscribed){var t=this.isProject?"projects":"communities";this.$axios.$delete("/api/v1/profiles/".concat(this.$store.state.user._id,"/subs/").concat(t,"/").concat(this.id))}else this.$axios.$post("/api/v1/profiles/".concat(this.$store.state.user._id,"/subs"),{projectId:this.isProject?this.id:void 0,communityId:this.isProject?void 0:this.id});this.$emit("subscription-button-clicked",!this.isSubscribed)}}},o=(r(382),r(1)),c={name:"Banner",components:{SubscriptionButton:Object(o.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"sub-button",class:this.getClasses,on:{click:this.handleClick}},[e("b",[this._v(this._s(this.getText))])])},[],!1,null,"72fdeaca",null).exports},props:{id:{type:String,default:""},bannerUrl:{type:String,default:""},bannerTitle:{type:String,default:""},bannerTitlePrefix:{type:String,default:""},isSubscribed:{type:Boolean,default:!1},isOwner:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1}},methods:{handleClick:function(t){this.$emit("subscription-button-clicked",t)}}},l=(r(384),Object(o.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"banner-container",class:{isMobile:t.isMobile}},[r("img",{attrs:{src:t.bannerUrl,onerror:"this.src='https://gradientjoy.com/1000x300'"}}),t._v(" "),r("div",{staticClass:"banner-subscription-button-container"},[t.isOwner?t._e():r("SubscriptionButton",{attrs:{"is-subscribed":t.isSubscribed,"is-project":"@"===t.bannerTitlePrefix,id:t.id},on:{"subscription-button-clicked":t.handleClick}})],1),t._v(" "),r("div",{staticClass:"banner-title",class:{"banner-font-desktop":!t.isMobile,"banner-font-mobile":t.isMobile,"banner-title-desktop":!t.isMobile,"banner-title-mobile":t.isMobile}},[r("b",[t._v(t._s(t.bannerTitlePrefix)+t._s(t.bannerTitle))])])])},[],!1,null,"146b9957",null));e.a=l.exports},410:function(t,e,r){var content=r(464);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(11).default)("effdf3c2",content,!0,{sourceMap:!1})},463:function(t,e,r){"use strict";var n=r(410);r.n(n).a},464:function(t,e,r){(t.exports=r(10)(!1)).push([t.i,".column.isMobile[data-v-78ee4620]{width:50%}.column.is-half[data-v-78ee4620]{padding:0}.column.is-one-quarter[data-v-78ee4620]{padding-top:0;padding-right:0}.mobile-main-margin[data-v-78ee4620]{padding-top:100px}div.level[data-v-78ee4620]{top:0}",""])},501:function(t,e,r){"use strict";r.r(e);r(39),r(29);var n=r(18),o=(r(20),r(4)),c=(r(28),r(62)),l=r(142),d=r(61),m=r(141),f=r(387),h=r(366),v=r(376),x=r(367),w=r(375),j=r(423),k=r(386),P=r(422),_=r(388),C={name:"ProjectPage",components:{SignupCard:r(374).a,EmptyPostList:_.a,Header:d.a,MobileHeader:c.a,MobileFooter:l.a,NavPane:m.a,Banner:f.a,DescriptionCard:h.a,ProfileCard:v.a,InfoPane:x.a,EditButton:w.a,EditProjectModal:j.a,Post:k.a},data:function(){return{name:null,bannerPictureUrl:"",projectProfilePictureUrl:"",projectDescription:"",admins:null,numSubs:0,projectId:"",adminFirstName:"",adminLastName:"",adminUsername:"",projectName:"",adminProfilePictureUrl:"",projectStats:[],profileStats:[],postList:[],isNestedUrl:!1}},computed:{sort:function(){return this.$store.state.sorting.project},isOwner:function(){var t=!1;if(void 0!==this.$store.state.user.owned)for(var i=0;i<this.$store.state.user.owned.length;i++)this.$store.state.user.owned[i].name===this.name&&(t=!0);return t},isSubscribed:function(){var t=!1;if(void 0!==this.$store.state.user.subscriptions)for(var i=0;i<this.$store.state.user.subscriptions.length;i++)this.$store.state.user.subscriptions[i].name===this.name&&(t=!0);return t}},watch:{sort:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$get("/api/v1/project/posts/".concat(this.projectId,"/").concat(this.sort,"/0"));case 2:return this.postList=t.sent,t.next=5,this.scroll();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.name=this.$route.params.projectname,this.$route.params.hasOwnProperty("postId")&&(this.isNestedUrl=!0)},mounted:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r,n,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/v1/projects/project/".concat(this.name));case 2:return e=t.sent,this.bannerPictureUrl=e.data.headerPicture,this.projectProfilePictureUrl=e.data.profilePicture,this.projectId=e.data._id,this.projectName=e.data.projectName,this.numSubs=e.data.subscribers,this.projectDescription=e.data.description,this.admins=e.data.admins,this.projectStats.push({name:"Subs",stat:e.data.subscribers}),this.projectStats.push({name:"Rep",stat:e.data.reputation}),this.projectStats.push({name:"Posts",stat:e.data.postCount}),t.next=15,this.$axios.get("/api/v1/profiles/".concat(this.admins[0]));case 15:if(r=t.sent,this.adminFirstName=r.data.firstName,this.adminLastName=r.data.lastName,this.adminUsername=r.data.username,this.adminProfilePictureUrl=r.data.profilePicture,this.profileStats.push({name:"Rep",stat:r.data.reputation}),this.profileStats.push({name:"Posts",stat:r.data.postCount}),this.profileStats.push({name:"Replies",stat:r.data.commentCount}),!this.isNestedUrl){t.next=28;break}return t.next=26,this.$axios.$get("/api/v1/posts/".concat(this.$route.params.postId));case 26:n=t.sent,this.$modal.open({parent:this,component:P.a,props:{postObj:n,isFromNestedUrl:!0,fallbackUrl:"/dev/project/".concat(this.name)},events:{"delete-post":function(t){o.removePostFromPostList(t)}},width:900,hasModalCard:!0});case 28:return t.next=30,this.$axios.$get("/api/v1/project/posts/".concat(this.projectId,"/").concat(this.sort,"/").concat(this.postList.length));case 30:return this.postList=t.sent,t.next=33,this.scroll();case 33:document.title="Kowalla - @".concat(this.name);case 34:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{scroll:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.postList.length&&(e=!1,window.onscroll=Object(o.a)(regeneratorRuntime.mark(function t(){var n,o,c,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=document.getElementById("postFeed"),o=window.innerHeight+window.scrollY>=n.offsetHeight-300,e||!o){t.next=15;break}return e=!0,t.next=6,r.$axios.$get("/api/v1/project/posts/".concat(r.projectId,"/").concat(r.sort,"/").concat(r.postList.length));case 6:return c=t.sent,t.next=9,r.postList.concat(c);case 9:if(l=t.sent,!c.length){t.next=15;break}return t.next=13,l;case 13:r.postList=t.sent,e=!1;case 15:case"end":return t.stop()}},t)})));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updateSubscriptions:function(t){var e={name:this.name,pictureUrl:this.projectProfilePictureUrl,numSubs:t?this.projectStats[0].stat+1:this.projectStats[0].stat-1,projectId:this.projectId};this.projectStats[0].stat=t?this.projectStats[0].stat+1:this.projectStats[0].stat-1;var r=Object(n.a)({subBool:t},e);this.$store.dispatch("user/updateSubscriptions",r)},callEditProjectModal:function(){this.$router.push({path:"/dev/project/".concat(this.name,"/edit")})},removePostFromPostList:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(this.postList);case 1:if((t.t1=t.t0()).done){t.next=10;break}if(i=t.t1.value,this.postList[i]._id!==e){t.next=8;break}return this.postList.splice(i,1),t.next=7,this.$axios.delete("/api/v1/communities/".concat(this.communityId,"/posts/").concat(e));case 7:return t.abrupt("break",10);case 8:t.next=1;break;case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},S=(r(463),r(1)),component=Object(S.a)(C,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"screen background-tint"},[r("div",{staticClass:"container is-fullhd is-hidden-touch"},[r("div",{staticClass:"columns is-marginless  main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[r("div",{staticClass:"column is-one-quarter is-paddingless side-pane"},[r("NavPane",{staticClass:"fixed"})],1),t._v(" "),r("div",{staticClass:"column is-three-quarters is-paddingless"},[r("Banner",{attrs:{"banner-url":t.bannerPictureUrl,"banner-title":t.name,id:t.projectId,"is-subscribed":t.isSubscribed,"is-owner":t.isOwner,"banner-title-prefix":"@"},on:{"subscription-button-clicked":t.updateSubscriptions}}),t._v(" "),r("div",{staticClass:"columns is-marginless newsfeed-padding"},[r("div",{staticClass:"column is-half"},[r("DescriptionCard",{attrs:{"subheader-on":!1,"header-string":"Description"}},[t._v("\n              "+t._s(t.projectDescription)+"\n            ")]),t._v(" "),this.$store.state.user.username===t.adminUsername?r("EditButton",{on:{"edit-button-clicked":t.callEditProjectModal}},[r("b",[t._v("Edit Settings")])]):t._e()],1),t._v(" "),r("div",{staticClass:"column is-one-quarter"},[r("ProfileCard",{attrs:{name:t.projectName,username:t.name,"profile-picture-url":t.projectProfilePictureUrl,"subheader-string":"View "+t.name+"'s stats",stats:t.projectStats,type:"project"}})],1),t._v(" "),r("div",{staticClass:"column is-one-quarter"},[r("ProfileCard",{attrs:{name:t.adminFirstName+" "+t.adminLastName,username:t.adminUsername,"profile-picture-url":t.adminProfilePictureUrl,"subheader-string":"View "+t.adminFirstName+"'s profile","subheader-url":"/dev/user/"+t.adminUsername,stats:t.profileStats,type:"user"}})],1)]),t._v(" "),r("div",{staticClass:"columns is-marginless",attrs:{id:"postFeed"}},[r("div",{staticClass:"column is-two-thirds is-paddingless"},[t.postList.length?t._e():r("EmptyPostList"),t._v(" "),t._l(t.postList,function(e){return r("Post",{key:e._id,attrs:{post:e},on:{"delete-post":t.removePostFromPostList}})})],2),t._v(" "),r("div",{staticClass:"column is-one-third side-pane is-paddingless"},[r("InfoPane",[this.$store.state.user.loggedIn?t._e():r("SignupCard",{staticClass:"fullWidth"})],1)],1)])],1)])]),t._v(" "),r("div",{staticClass:"is-marginless is-hidden-desktop mobile-main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[r("Banner",{attrs:{"banner-url":t.bannerPictureUrl,"banner-title":t.name,id:t.projectId,"is-subscribed":t.isSubscribed,"is-owner":t.isOwner,"banner-title-prefix":"@","is-mobile":""},on:{"subscription-button-clicked":t.updateSubscriptions}}),t._v(" "),r("DescriptionCard",{staticClass:"newsfeed-margin",attrs:{"subheader-on":!1,"header-string":"Description"}},[t._v("\n      "+t._s(t.projectDescription)+"\n    ")]),t._v(" "),r("div",{staticClass:"columns is-marginless is-paddingless is-mobile is-centered is-centered is-multiline"},[r("div",{staticClass:"column isMobile is-narrow"},[r("ProfileCard",{attrs:{name:t.projectName,username:t.name,"profile-picture-url":t.projectProfilePictureUrl,"subheader-string":"View "+t.name+"'s stats",stats:t.projectStats,type:"project","is-mobile":""}})],1),t._v(" "),r("div",{staticClass:"column isMobile is-narrow"},[r("ProfileCard",{attrs:{name:t.adminFirstName+" "+t.adminLastName,username:t.adminUsername,"profile-picture-url":t.adminProfilePictureUrl,"subheader-string":"View "+t.adminFirstName+"'s profile","subheader-url":"/dev/user/"+t.adminUsername,stats:t.profileStats,type:"user","is-mobile":""}})],1)]),t._v(" "),r("div",{staticClass:"side-pane"},[this.$store.state.user.username===t.adminUsername?r("EditButton",{on:{"edit-button-clicked":t.callEditProjectModal}},[r("b",[t._v("Edit Settings")])]):t._e()],1),t._v(" "),t.postList.length?t._e():r("EmptyPostList"),t._v(" "),t._l(t.postList,function(e){return r("Post",{key:e._id,attrs:{post:e,"is-mobile":""},on:{"delete-post":t.removePostFromPostList}})})],2)])},[],!1,null,"78ee4620",null);e.default=component.exports}}]);