(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{377:function(t,e,o){var content=o(391);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("f017b21e",content,!0,{sourceMap:!1})},386:function(t,e,o){"use strict";var n=o(49),r=(o(20),o(4)),c=o(389),d=o(60),l={name:"Reactions",components:{ReactionModal:c.a},props:{postId:{type:String,default:""},createPicker:{type:Function,default:function(){}},reactionsFormatted:{type:Array,default:function(){return[]}},toggleReaction:{type:Function,default:function(){}}},data:function(){return{}},computed:{reactionCount:function(){var t=0;return this.reactionsFormatted.length>3&&this.reactionsFormatted.slice(3).map(function(e){t=e.count+t}),t},reactionCountMobile:function(){var t=0;return this.reactionsFormatted.map(function(e){t=e.count+t}),t}},mounted:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),methods:{cardModal:function(){if(!this.$store.state.user.loggedIn)return this.$modal.open({parent:this,component:d.a,width:900,hasModalCard:!0,props:{initialState:!1}});this.$modal.open({parent:this,component:c.a,props:{reactionsFormatted:this.reactionsFormatted,toggleReaction:this.toggleReaction},hasModalCard:!0})},showPost:function(){window.history.pushState({},""),this.$emit("open-post")}}},m=(o(428),o(1)),f=Object(m.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"level is-mobile"},[o("div",{staticClass:"reactions level-left"},[t._l(t.reactionsFormatted.slice(0,3),function(e,n){return o("a",{key:n,staticClass:"button is-outlined iterator level-item is-hidden-mobile",class:{"user-reacted":e.userReacted},on:{click:function(o){return t.toggleReaction(e.emoji,n)}}},[o("b",[t._v(t._s(e.emoji)+t._s(e.count))])])}),t._v(" "),t.reactionCount?o("a",{staticClass:"button is-outlined level-item is-hidden-mobile",on:{click:function(e){return t.cardModal()}}},[o("b",[t._v("··· "+t._s(t.reactionCount))])]):t._e(),t._v(" "),t.reactionsFormatted.length?o("a",{staticClass:"button is-outlined iterator level-item is-hidden-tablet",on:{click:function(e){return t.cardModal()}}},[o("b",[t._l(t.reactionsFormatted.slice(0,3),function(e,n){return o("span",{key:n,staticClass:"is-marginless is-paddingless"},[t._v(t._s(e.emoji)+" ")])}),t._v(t._s(t.reactionCountMobile)+"\n      ")],2)]):t._e(),t._v(" "),this.$store.state.user.loggedIn?o("b-dropdown",{ref:"dropdown",attrs:{"mobile-modal":""}},[o("a",{staticClass:"button is-outlined level-item",attrs:{slot:"trigger"},on:{click:t.createPicker},slot:"trigger"},[o("font-awesome-icon",{attrs:{icon:"smile"}})],1),t._v(" "),o("b-dropdown-item",{attrs:{custom:""}},[o("div",{ref:"picker"})])],1):t._e(),t._v(" "),o("div",{staticClass:"comments level-item",on:{click:function(e){return t.showPost()}}},[o("font-awesome-icon",{attrs:{id:"commentIcon",icon:"comments"}}),t._v(" Comments\n    ")],1)],2)])},[],!1,null,"1335a39d",null).exports,v=o(426),h=o(427),_=o(422),x=(o(144),o(399),{name:"DropdownPicker",components:{Picker:(o(398)||"").Picker},props:{toggleReaction:{type:Function,default:function(){}}}}),y=Object(m.a)(x,function(){var t=this.$createElement;return(this._self._c||t)("Picker",{attrs:{native:!0,"show-skin-tones":!1,"show-preview":!1},on:{select:this.toggleReaction}})},[],!1,null,"59f6955b",null).exports,w=o(3),j=o.n(w),C={name:"Post",components:{PostTimer:h.a,PostHeader:v.a,Reactions:f},props:{post:{type:Object,default:function(){}},hideComments:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1},methodProp:{type:Function,default:function(){}}},data:function(){return{project:{},community:{},profile:{},isProject:!1,overflow:!1,reactionList:[],reactionsFormatted:[]}},mounted:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.post.hasOwnProperty("projectId")){t.next=16;break}return this.isProject=!0,t.prev=2,t.next=5,this.$axios.$get("/api/v1/projects/".concat(this.post.projectId));case 5:return this.project=t.sent,t.next=8,this.$axios.$get("/api/v1/communities/".concat(this.post.communityId));case 8:this.community=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log("error grabbing some values");case 14:t.next=29;break;case 16:return this.isProject=!1,t.prev=17,t.next=20,this.$axios.$get("/api/v1/profiles/".concat(this.post.profileId));case 20:return this.profile=t.sent,t.next=23,this.$axios.$get("/api/v1/communities/".concat(this.post.communityId));case 23:this.community=t.sent,t.next=29;break;case 26:t.prev=26,t.t1=t.catch(17),console.log("error grabbing some values");case 29:return this.$refs.content&&this.$refs.content.getBoundingClientRect().height>=480&&(this.overflow=!0),t.prev=30,t.next=33,this.$axios.$get("/api/v1/posts/".concat(this.post._id,"/reactions"));case 33:this.reactionList=t.sent,this.reactionList.length&&this.reactionList.forEach(function(t){var o=t.profileId===e.$store.state.user._id,n=e.reactionsFormatted.map(function(t){return t.emoji}).indexOf(t.emoji);-1===n?(e.reactionsFormatted.push({emoji:t.emoji,count:1,userReacted:!1}),o&&(n=e.reactionsFormatted.map(function(t){return t.emoji}).indexOf(t.emoji),e.reactionsFormatted[n].userReacted=!0)):(e.reactionsFormatted[n].count++,o&&(e.reactionsFormatted[n].userReacted=!0))}),t.next=40;break;case 37:t.prev=37,t.t2=t.catch(30),console.log("some kind of error idk");case 40:case"end":return t.stop()}},t,this,[[2,11],[17,26],[30,37]])}));return function(){return t.apply(this,arguments)}}(),methods:{echoDeletePost:function(t){this.$emit("delete-post",t)},openPost:function(){var t=this,e={community:this.community,project:this.isProject?this.project:{},profile:this.isProject?{}:this.profile};this.$modal.open({parent:this,component:_.a,props:{infoObj:e,postObj:this.post,isProject:this.isProject},events:{"delete-post":function(e){t.echoDeletePost(e)}},width:900,hasModalCard:!0})},toggleReaction:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var o,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$store.state.user.loggedIn){t.next=2;break}return t.abrupt("return",this.$modal.open({parent:this,component:d.a,width:900,hasModalCard:!0,props:{initialState:!1}}));case 2:return o="string"==typeof e?e:e.native,t.next=5,this.reactionsFormatted.map(function(t){return t.emoji}).indexOf(o);case 5:if(r=t.sent,c="object"===Object(n.a)(e),-1!==r&&!1!==this.reactionsFormatted[r].userReacted){t.next=11;break}return t.abrupt("return",this.toggleReactionTrue(o,r,c));case 11:if(-1===r||!0!==this.reactionsFormatted[r].userReacted){t.next=13;break}return t.abrupt("return",this.toggleReactionFalse(o,r));case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),toggleReactionTrue:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e,o,n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$post("/api/v1/profiles/".concat(this.$store.state.user._id,"/reactions"),{emoji:e,postId:this.post._id});case 2:-1===o?(this.reactionsFormatted.push({emoji:e,count:1,userReacted:!1}),r=this.reactionsFormatted.map(function(t){return t.emoji}).indexOf(e),this.reactionsFormatted[r].userReacted=!0):(this.reactionsFormatted[o].userReacted=!0,this.reactionsFormatted[o].count++),n&&this.$children[1].$refs.dropdown.toggle();case 4:case"end":return t.stop()}},t,this)}));return function(e,o,n){return t.apply(this,arguments)}}(),toggleReactionFalse:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e,o){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.delete("/api/v1/profiles/".concat(this.$store.state.user._id,"/reactions/").concat(this.post._id),{data:{emoji:e}});case 2:this.reactionsFormatted[o].count--,this.reactionsFormatted[o].userReacted=!1,0===this.reactionsFormatted[o].count&&this.reactionsFormatted.splice(o,1);case 5:case"end":return t.stop()}},t,this)}));return function(e,o){return t.apply(this,arguments)}}(),createPicker:function(){if(this.$children[1].$refs.picker.attributes[0].ownerElement.children.length)return null;var t=new(j.a.extend(y))({propsData:{toggleReaction:this.toggleReaction}});t.$mount(),this.$children[1].$refs.picker.appendChild(t.$el)}}},k=(o(447),Object(m.a)(C,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"card"},[o("PostHeader",{attrs:{"is-active":t.post.isActive,"created-at":t.post.createdAt,profile:t.profile,project:t.project,community:t.community,"is-project":t.isProject,"is-mobile":t.isMobile,"post-id":t.post._id},on:{"delete-post":t.echoDeletePost}}),t._v(" "),t.post.isActive?o("PostTimer",{attrs:{"start-time":t.post.start}}):t._e(),t._v(" "),o("div",{ref:"content",class:{fullHeight:!t.overflow},attrs:{id:"content-box"}},[o("div",{staticClass:"content is-marginless",domProps:{innerHTML:t._s(t.post.content)}}),t._v(" "),t.overflow?o("p",{staticClass:"read-more",on:{click:function(e){t.overflow=!t.overflow}}},[o("a",[t._v("Read More")])]):t._e()]),t._v(" "),o("br"),t._v(" "),o("Reactions",{attrs:{"post-id":t.post._id,"create-picker":t.createPicker,"toggle-reaction":t.toggleReaction,"reactions-formatted":t.reactionsFormatted},on:{"open-post":t.openPost}})],1)},[],!1,null,"18693df4",null));e.a=k.exports},388:function(t,e,o){"use strict";var n={name:"EmptyPostList"},r=o(1),component=Object(r.a)(n,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"noPosts"},[e("h1",[this._v("No posts here yet!")])])}],!1,null,"30a24e92",null);e.a=component.exports},389:function(t,e,o){"use strict";var n={name:"ReactionModal",props:{toggleReaction:{type:Function,default:function(){}},reactionsFormatted:{type:Array,default:function(){return[]}}}},r=(o(390),o(1)),component=Object(r.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"card"},[o("aside",{staticClass:"menu"},[o("div",{staticClass:"message-header"},[t._v("\n        Reactions\n      ")]),t._v(" "),t._l(t.reactionsFormatted,function(e,n){return o("ul",{key:n,staticClass:"menu-list"},[o("li",{staticClass:"is-size-4",class:{"user-reacted":e.userReacted},on:{click:function(o){return t.toggleReaction(e.emoji,n)}}},[o("a",[t._v(t._s(e.emoji)+" "),o("span",[t._v(t._s(e.count))])])])])})],2)])])},[],!1,null,"31854260",null);e.a=component.exports},390:function(t,e,o){"use strict";var n=o(377);o.n(n).a},391:function(t,e,o){(t.exports=o(10)(!1)).push([t.i,".card[data-v-31854260]{border-radius:6px;min-width:350px;max-height:85vh;overflow-y:scroll}.message-header[data-v-31854260]{background:#39c9a0}.user-reacted[data-v-31854260]{background-color:rgba(57,201,160,.3)}.menu-list li a[data-v-31854260]{display:flex;justify-content:space-between;color:#39c9a0}",""])},392:function(t,e,o){var content=o(429);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("26cd3f62",content,!0,{sourceMap:!1})},393:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLocale=e.register=void 0;var n="second_minute_hour_day_week_month_year".split("_"),r="秒_分钟_小时_天_周_个月_年".split("_"),c=function(t,e){if(0===e)return["just now","right now"];var o=n[parseInt(e/2)];return t>1&&(o+="s"),["".concat(t," ").concat(o," ago"),"in ".concat(t," ").concat(o)]},d={en_US:c,zh_CN:function(t,e){if(0===e)return["刚刚","片刻后"];var o=r[parseInt(e/2)];return["".concat(t," ").concat(o,"前"),"".concat(t," ").concat(o,"后")]}};e.register=function(t,e){d[t]=e};e.getLocale=function(t){return d[t]||c}},394:function(t,e,o){var content=o(434);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("be379402",content,!0,{sourceMap:!1})},395:function(t,e,o){var content=o(436);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("56893694",content,!0,{sourceMap:!1})},396:function(t,e,o){var content=o(438);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("23c068d0",content,!0,{sourceMap:!1})},397:function(t,e,o){var content=o(440);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("4f0d01fc",content,!0,{sourceMap:!1})},400:function(t,e,o){var content=o(444);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("fdaaa466",content,!0,{sourceMap:!1})},401:function(t,e,o){var content=o(446);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("55a3bb67",content,!0,{sourceMap:!1})},402:function(t,e,o){var content=o(448);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(11).default)("0650bba6",content,!0,{sourceMap:!1})},422:function(t,e,o){"use strict";o(20);var n=o(4),r=(o(28),o(201),{name:"AddComment",props:{updateComment:{type:Function,default:function(){}},postId:{type:String,default:""},commentId:{type:String,default:""},resetReply:{type:Function,default:function(){}}},data:function(){return{comment:""}},methods:{createComment:function(){if(this.comment.length){var t={profileId:this.$store.state.user._id,postId:this.postId,content:this.comment,commentId:this.commentId?this.commentId:""};this.$axios.$post("/api/v1/comments",t),this.updateComment(t),this.comment="",this.resetReply("")}else this.$toast.open({duration:4e3,message:"You cannot post a blank comment.",position:"is-top",type:"is-danger"})}}}),c=(o(437),o(1)),d=Object(c.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("article",{staticClass:"media"},[o("div",{staticClass:"media-content"},[o("div",{staticClass:"field"},[o("p",{staticClass:"control"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"textarea",attrs:{placeholder:"Add a comment...",rows:"2"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"field"},[o("a",{staticClass:"button action post",on:{click:function(e){return t.createComment()}}},[o("b",[t._v("Post")])])])])])},[],!1,null,"0d049126",null).exports,l=o(424).format,m={name:"Comment",components:{AddComment:d},props:{comment:{type:Object,default:function(){}},nestLevel:{type:Number,default:0},toggle:{type:Function,default:function(){}},activeComment:{type:String,default:""}},data:function(){return{profile:{},replyList:[],activeNestedCommentId:"",upvote:{}}},computed:{userUpvoted:function(){return!!this.upvote.userUpvoted},createdAtFormatted:function(){return l(this.comment.createdAt,"en_US")},nextNestLevel:function(){return Number(this.nestLevel+1)}},mounted:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.$get("/api/v1/profiles/".concat(this.comment.profileId));case 3:return this.profile=t.sent,t.next=6,this.$axios.$get("/api/v1/comments/".concat(this.comment.postId,"/").concat(this.comment._id));case 6:return this.replyList=t.sent,t.next=9,this.$axios.$get("/api/v1/comments/".concat(this.comment._id,"/").concat(this.$store.state.user._id,"/upvote"));case 9:this.upvote=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("error grabbing some values");case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}(),methods:{updateComment:function(t){this.replyList.unshift(t)},toggleReply:function(){this.activeComment===this.comment._id?this.toggle(""):this.toggle(this.comment._id)},toggleUpvote:function(){this.upvote.userUpvoted?this.$axios.delete("/api/v1/comments/".concat(this.comment.postId,"/").concat(this.$store.state.user._id,"/upvote")):this.$axios.$post("/api/v1/comments/upvote",{commentId:this.comment._id,profileId:this.$store.state.user._id}),this.upvote.userUpvoted=!this.upvote.userUpvoted}}},f=(o(439),Object(c.a)(m,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("article",{staticClass:"media"},[o("a",{on:{click:function(e){return t.toggleUpvote()}}},[o("font-awesome-icon",{staticClass:"media-left upvote icon",class:{"user-upvoted":!!t.userUpvoted},attrs:{icon:"arrow-up"}})],1),t._v(" "),o("div",{staticClass:"media-content"},[o("div",{staticClass:"content"},[o("p",{attrs:{id:"reply"}},[o("small",[t._v("@"+t._s(t.profile.username)+" · "+t._s(t.createdAtFormatted))]),t._v(" "),o("br"),t._v("\n          "+t._s(t.comment.content)+"\n          "),o("br"),t._v(" "),t.nestLevel<2?o("small",{on:{click:function(e){return t.toggleReply()}}},[o("a",[t._v("Reply")])]):t._e()]),t._v(" "),t.activeComment===t.comment._id?o("AddComment",{attrs:{"comment-id":t.comment._id,"update-comment":t.updateComment,"reset-reply":t.toggle,"post-id":t.comment.postId}}):t._e()],1),t._v(" "),t.nestLevel<2?o("div",t._l(t.replyList,function(e){return o("Comment",{key:e._id,attrs:{"active-comment":t.activeComment,comment:e,"comment-upvote":e.upvote,"nest-level":t.nextNestLevel,toggle:t.toggle}})}),1):t._e()])])])},[],!1,null,"4c8a1b0e",null).exports),v=o(49),h=o(389),_=(o(399),(o(398)||"").Picker),x={name:"ReactionNoComments",components:{ReactionModal:h.a,Picker:_},props:{postId:{type:String,default:""},hideComments:{type:Boolean,default:!1}},data:function(){return{reactionList:[],reactionsFormatted:[]}},computed:{reactionCount:function(){var t=0;return this.reactionsFormatted.length>3&&this.reactionsFormatted.slice(3).map(function(e){t=e.count+t}),t},reactionCountMobile:function(){var t=0;return this.reactionsFormatted.map(function(e){t=e.count+t}),t}},mounted:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.$get("/api/v1/posts/".concat(this.postId,"/reactions"));case 3:this.reactionList=t.sent,this.reactionList.length&&this.reactionList.forEach(function(t){var o=t.profileId===e.$store.state.user._id,n=e.reactionsFormatted.map(function(t){return t.emoji}).indexOf(t.emoji);-1===n?(e.reactionsFormatted.push({emoji:t.emoji,count:1,userReacted:!1}),o&&(n=e.reactionsFormatted.map(function(t){return t.emoji}).indexOf(t.emoji),e.reactionsFormatted[n].userReacted=!0)):(e.reactionsFormatted[n].count++,o&&(e.reactionsFormatted[n].userReacted=!0))}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("some kind of error idk");case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),methods:{toggleReaction:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var o,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o="string"==typeof e?e:e.native,t.next=3,this.reactionsFormatted.map(function(t){return t.emoji}).indexOf(o);case 3:if(n=t.sent,r="object"===Object(v.a)(e),-1!==n&&!1!==this.reactionsFormatted[n].userReacted){t.next=9;break}return t.abrupt("return",this.toggleReactionTrue(o,n,r));case 9:if(-1===n||!0!==this.reactionsFormatted[n].userReacted){t.next=11;break}return t.abrupt("return",this.toggleReactionFalse(o,n));case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),toggleReactionTrue:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e,o,n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$post("/api/v1/profiles/".concat(this.$store.state.user._id,"/reactions"),{emoji:e,postId:this.postId});case 2:-1===o?(this.reactionsFormatted.push({emoji:e,count:1,userReacted:!1}),r=this.reactionsFormatted.map(function(t){return t.emoji}).indexOf(e),this.reactionsFormatted[r].userReacted=!0):(this.reactionsFormatted[o].userReacted=!0,this.reactionsFormatted[o].count++),n&&this.$refs.dropdown.toggle();case 4:case"end":return t.stop()}},t,this)}));return function(e,o,n){return t.apply(this,arguments)}}(),toggleReactionFalse:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e,o){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.delete("/api/v1/profiles/".concat(this.$store.state.user._id,"/reactions/").concat(this.postId),{data:{emoji:e}});case 2:this.reactionsFormatted[o].count--,this.reactionsFormatted[o].userReacted=!1,0===this.reactionsFormatted[o].count&&this.reactionsFormatted.splice(o,1);case 5:case"end":return t.stop()}},t,this)}));return function(e,o){return t.apply(this,arguments)}}(),cardModal:function(){this.$modal.open({parent:this,component:h.a,props:{reactionsFormatted:this.reactionsFormatted},hasModalCard:!0})}}},y=(o(443),Object(c.a)(x,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"level is-mobile"},[o("div",{staticClass:"reactions level-left"},[t._l(t.reactionsFormatted.slice(0,3),function(e,n){return o("a",{key:n,staticClass:"button is-outlined iterator level-item is-hidden-mobile",class:{"user-reacted":e.userReacted},on:{click:function(o){return t.toggleReaction(e.emoji,n)}}},[o("b",[t._v(t._s(e.emoji)+t._s(e.count))])])}),t._v(" "),t.reactionCount?o("a",{staticClass:"button is-outlined level-item is-hidden-mobile",on:{click:function(e){return t.cardModal()}}},[o("b",[t._v("··· "+t._s(t.reactionCount))])]):t._e(),t._v(" "),t.reactionsFormatted.length?o("a",{staticClass:"button is-outlined iterator level-item is-hidden-tablet",on:{click:function(e){return t.cardModal()}}},[o("b",[t._l(t.reactionsFormatted.slice(0,3),function(e,n){return o("span",{key:n,staticClass:"is-marginless is-paddingless"},[t._v(t._s(e.emoji)+"\n        ")])}),t._v("\n\n        "+t._s(t.reactionCountMobile)+"\n      ")],2)]):t._e(),t._v(" "),o("BDropdown",{ref:"dropdown",attrs:{"mobile-modal":""}},[o("a",{staticClass:"button is-outlined level-item",attrs:{slot:"trigger"},slot:"trigger"},[o("font-awesome-icon",{attrs:{icon:"smile"}})],1),t._v(" "),o("BDropdownItem",{attrs:{custom:""}},[o("Picker",{attrs:{"show-skin-tones":!1,"show-preview":!1,set:"apple"},on:{select:t.toggleReaction}})],1)],1)],2)])},[],!1,null,"5b2417a9",null).exports),w=o(426),j=o(427),C=(o(144),{name:"PostModal",components:{AddComment:d,Comment:f,Reactions:y,PostHeader:w.a,PostTimer:j.a},props:{isFromNestedUrl:{type:Boolean,default:!1},isFromNewsfeed:{type:Boolean,default:!1},fallbackUrl:{type:String,default:""},isProject:{type:Boolean,default:!1},infoObj:{type:Object,default:function(){return{}}},postObj:{type:Object,default:function(){return{}}}},data:function(){return{commentList:[],activeCommentId:"",originalPath:"",profile:{},project:{},community:{},post:{}}},created:function(){this.post=this.postObj,this.profile=this.infoObj.profile,this.community=this.infoObj.community,this.project=this.infoObj.project,this.isFromNestedUrl||(this.originalPath=this.$route.path,window.history.pushState({},null,"/dev/community/".concat(this.community.name,"/posts/").concat(this.post._id)))},beforeDestroy:function(){window.history.pushState({},null,"".concat(this.$route.path))},mounted:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isFromNestedUrl){t.next=30;break}if(!this.post.hasOwnProperty("projectId")){t.next=17;break}return this.isProject=!0,t.prev=3,t.next=6,this.$axios.$get("/api/v1/projects/".concat(this.post.projectId));case 6:return this.project=t.sent,t.next=9,this.$axios.$get("/api/v1/communities/".concat(this.post.communityId));case 9:this.community=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log("error grabbing some values");case 15:t.next=30;break;case 17:return this.isProject=!1,t.prev=18,t.next=21,this.$axios.$get("/api/v1/profiles/".concat(this.post.profileId));case 21:return this.profile=t.sent,t.next=24,this.$axios.$get("/api/v1/communities/".concat(this.post.communityId));case 24:this.community=t.sent,t.next=30;break;case 27:t.prev=27,t.t1=t.catch(18),console.log("error grabbing some values");case 30:return t.next=32,this.$axios.$get("/api/v1/comments/".concat(this.post._id));case 32:this.commentList=t.sent,this.commentList.map(function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(o,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/api/v1/comments/".concat(o._id,"/").concat(e.$store.state.user._id,"/upvote"));case 2:e.commentList[n].upvote=t.sent;case 3:case"end":return t.stop()}},t)}));return function(e,o){return t.apply(this,arguments)}}());case 34:case"end":return t.stop()}},t,this,[[3,12],[18,27]])}));return function(){return t.apply(this,arguments)}}(),methods:{updateComment:function(t){this.commentList.unshift(t)},toggleComment:function(t){this.activeCommentId=t},echoDeletePost:function(t){this.$emit("delete-post",t)}}}),k=(o(445),Object(c.a)(C,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal-content"},[o("div",{staticClass:"box is-paddingless"},[o("div",{staticClass:"card"},[o("PostHeader",{attrs:{"is-active":t.post.isActive,"created-at":t.post.createdAt,profile:t.profile,project:t.project,community:t.community,"is-project":t.isProject,"post-id":t.post._id,"is-modal":!0},on:{"delete-post":t.echoDeletePost}}),t._v(" "),t.post.isActive?o("PostTimer",{attrs:{time:t.post.expiration}}):t._e(),t._v(" "),o("div",{staticClass:"content is-marginless",domProps:{innerHTML:t._s(t.post.content)}}),t._v(" "),o("br"),t._v(" "),o("Reactions",{attrs:{"post-id":t.post._id}})],1),t._v(" "),t.activeCommentId?t._e():o("AddComment",{attrs:{"post-id":t.post._id,"update-comment":t.updateComment}}),t._v(" "),t._l(t.commentList,function(e){return o("Comment",{key:e._id,attrs:{"active-comment":t.activeCommentId,comment:e,"nest-level":0,toggle:t.toggleComment}})})],2)])},[],!1,null,"693a4f6b",null));e.a=k.exports},424:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"format",{enumerable:!0,get:function(){return n.format}}),Object.defineProperty(e,"render",{enumerable:!0,get:function(){return r.render}}),Object.defineProperty(e,"cancel",{enumerable:!0,get:function(){return r.cancel}}),Object.defineProperty(e,"register",{enumerable:!0,get:function(){return c.register}}),e.version=void 0;var n=o(430),r=o(431),c=o(393);e.version="4.0.0-beta.2"},425:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nextInterval=e.diffSec=e.formatDiff=e.toDate=e.toInt=void 0;var n=[60,60,24,7,365/7/12,12],r=function(t){return parseInt(t)};e.toInt=r;var c=function(input){return input instanceof Date?input:!isNaN(input)||/^\d+$/.test(input)?new Date(r(input)):(input=(input||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(input))};e.toDate=c;e.formatDiff=function(t,e){for(var i=0,o=t<0?1:0,c=t=Math.abs(t);t>=n[i]&&i<n.length;i++)t/=n[i];return(t=r(t))>(0==(i*=2)?9:1)&&(i+=1),e(t,i,c)[o].replace("%s",t)};e.diffSec=function(t,e){return((e=e?c(e):new Date)-c(t))/1e3};e.nextInterval=function(t){for(var e=1,i=0,o=Math.abs(t);t>=n[i]&&i<n.length;i++)t/=n[i],e*=n[i];return o=(o%=e)?e-o:e,Math.ceil(o)}},426:function(t,e,o){"use strict";o(28);var n=o(424).format,r={name:"PostHeader",props:{isActive:{type:Boolean,default:!1},isModal:{type:Boolean,default:!1},createdAt:{type:String,default:""},postId:{type:String,default:""},profile:{type:Object,default:function(){}},project:{type:Object,default:function(){}},community:{type:Object,default:function(){}},isProject:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1}},data:function(){return{}},computed:{createdAtFormatted:function(){return n(this.createdAt,"en_US")},getProfileRoute:function(){return"/dev/user/".concat(this.profile.username)},getProjectRoute:function(){return"/dev/project/".concat(this.project.name)},getCommunityRoute:function(){return"/dev/community/".concat(this.community.name)}},methods:{copyPostUrl:function(){var t="";t=this.isProject?"www.kowalla.co/dev/project/".concat(this.project.name,"/posts/").concat(this.postId):"www.kowalla.co/dev/community/".concat(this.community.name,"/posts/").concat(this.postId);var e=document.createElement("input");document.body.appendChild(e),e.value=t,e.select();try{document.execCommand("copy");this.$toast.open({duration:4e3,message:"Link copied! :)",position:"is-top",type:"is-success"})}catch(t){this.$toast.open({duration:4e3,message:"Link copy failed, try opening the post and copying the URL directly",position:"is-top",type:"is-danger"})}document.body.removeChild(e)},deletePost:function(){this.$emit("delete-post",this.postId)}}},c=(o(433),o(1)),component=Object(c.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"card-header"},[o("figure",{staticClass:"media-left"},[t.isProject?t._e():o("nuxt-link",{attrs:{to:t.getProfileRoute}},[o("p",{staticClass:"image is-48x48 profilePic"},[o("img",{attrs:{src:t.profile.profilePicture,onerror:"this.src='https://gradientjoy.com/64'"}})])]),t._v(" "),t.isProject?o("nuxt-link",{attrs:{to:t.getProjectRoute}},[o("p",{staticClass:"image is-48x48 profilePicProject"},[o("img",{attrs:{src:t.project.profilePicture,onerror:"this.src='https://gradientjoy.com/50'"}})])]):t._e()],1),t._v(" "),o("div",{staticClass:"card-content is-paddingless"},[t.isProject?o("nuxt-link",{staticClass:"no-decor",attrs:{to:t.getProjectRoute}},[o("p",[o("strong",[t._v(t._s(t.project.name))]),t._v(" "),o("small",{staticClass:"grey"},[o("span",{staticClass:"grey underline",attrs:{to:t.getProjectRoute}},[o("b",[t._v("@"+t._s(t.project.name))])]),t._v("\n\n          · "+t._s(t.createdAtFormatted)+"\n        ")])])]):t._e(),t._v(" "),t.isProject?t._e():o("nuxt-link",{staticClass:"no-decor",attrs:{to:t.getProfileRoute}},[o("p",[o("strong",[t._v(t._s(t.profile.firstName)+" "+t._s(t.profile.lastName))]),t._v(" "),o("small",{staticClass:"grey"},[o("span",{staticClass:"grey underline",attrs:{to:t.getProfileRoute}},[o("b",[t._v("@"+t._s(t.profile.username))])]),t._v(" "),t.isMobile?t._e():o("span",{staticClass:"grey"},[t._v("· "+t._s(t.createdAtFormatted))]),t._v(" "),t.isActive?o("span",[t._v("\n            ·\n            "),o("span",{staticClass:"liveBox"},[t._v("\n              LIVE\n            ")])]):t._e()])])]),t._v(" "),o("p",[t._v("\n      Posted in\n      "),o("nuxt-link",{staticClass:"community underline",attrs:{to:t.getCommunityRoute}},[o("b",[t._v("#"+t._s(t.community.name))])])],1),t._v(" "),o("p",{staticClass:"created-at-mobile"},[t.isMobile&&!t.isProject?o("span",{staticClass:"grey"},[t._v(t._s(t.createdAtFormatted))]):t._e()])],1),t._v(" "),o("div",{staticClass:"media-right"},[!t.isProject||t.isMobile||t.isModal?t.isProject&&t.isMobile&&!t.isModal?o("div",{staticClass:"update level is-mobile is-size-6"},[o("div",{staticClass:"mobile level-left"},[o("font-awesome-icon",{attrs:{icon:"flag"}})],1),t._v(" "),o("b-dropdown",{staticClass:"mobile level-right has-text-white",attrs:{"mobile-modal":!1,position:"is-bottom-left","aria-role":"list"}},[o("font-awesome-icon",{attrs:{slot:"trigger",icon:"angle-down"},slot:"trigger"}),t._v(" "),o("b-dropdown-item",{key:"0",attrs:{"aria-role":"listitem"},on:{click:t.copyPostUrl}},[o("font-awesome-icon",{attrs:{icon:"link"}}),t._v("\n          Copy link\n        ")],1),t._v(" "),t.profile._id===this.$store.state.user._id?o("b-dropdown-item",{key:"1",attrs:{"aria-role":"listitem"},on:{click:t.deletePost}},[o("font-awesome-icon",{attrs:{icon:"trash-alt"}}),t._v("\n          Delete\n        ")],1):t._e()],1)],1):o("b-dropdown",{attrs:{"mobile-modal":!1,position:"is-bottom-left","aria-role":"list"}},[o("font-awesome-icon",{attrs:{slot:"trigger",icon:"angle-down"},slot:"trigger"}),t._v(" "),o("b-dropdown-item",{key:"0",attrs:{"aria-role":"listitem"},on:{click:t.copyPostUrl}},[o("font-awesome-icon",{attrs:{icon:"link"}}),t._v("\n        Copy link\n      ")],1),t._v(" "),t.profile._id===this.$store.state.user._id?o("b-dropdown-item",{key:"1",attrs:{"aria-role":"listitem"},on:{click:t.deletePost}},[o("font-awesome-icon",{attrs:{icon:"trash-alt"}}),t._v("\n        Delete\n      ")],1):t._e()],1):o("div",{staticClass:"update level is-size-6"},[o("div",{staticClass:"level-left"},[o("font-awesome-icon",{attrs:{icon:"flag"}}),t._v("  \n        "),t._m(0)],1),t._v(" "),o("b-dropdown",{staticClass:"level-right has-text-white",attrs:{position:"is-bottom-left","aria-role":"list"}},[o("font-awesome-icon",{attrs:{slot:"trigger",icon:"angle-down"},slot:"trigger"}),t._v(" "),o("b-dropdown-item",{key:"0",attrs:{"aria-role":"listitem"},on:{click:t.copyPostUrl}},[o("font-awesome-icon",{attrs:{icon:"link"}}),t._v("\n          Copy link\n        ")],1),t._v(" "),t.profile._id===this.$store.state.user._id?o("b-dropdown-item",{key:"1",attrs:{"aria-role":"listitem"},on:{click:t.deletePost}},[o("font-awesome-icon",{attrs:{icon:"trash-alt"}}),t._v("\n          Delete\n        ")],1):t._e()],1)],1)],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",[e("b",[this._v("Update")])])}],!1,null,"65200053",null);e.a=component.exports},427:function(t,e,o){"use strict";var n={name:"PostTimer",props:{startTime:{type:String,default:""}},data:function(){return{countUp:""}},mounted:function(){this.countUpTimer()},methods:{countUpTimer:function(){var t=new Date(this.startTime).getTime(),e=this;setInterval(function(){var o=(new Date).getTime()-t,n=Math.floor(o%864e5/36e5),r=Math.floor(o%36e5/6e4),c=Math.floor(o%6e4/1e3);n=n<10?"0"+n:n,r=r<10?"0"+r:r,c=c<10?"0"+c:c,e.countUp="".concat(n,":").concat(r,":").concat(c)},1e3)}}},r=(o(435),o(1)),component=Object(r.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"level"},[e("div",{staticClass:"level-item"},[e("span",{staticClass:"liveBox"},[this._v(this._s(this.countUp))])])])},[],!1,null,"b889b48a",null);e.a=component.exports},428:function(t,e,o){"use strict";var n=o(392);o.n(n).a},429:function(t,e,o){(t.exports=o(10)(!1)).push([t.i,".level[data-v-1335a39d]{padding-left:.5em;padding-bottom:.5em;display:flex;flex-wrap:wrap}.button[data-v-1335a39d]{color:#39c9a0;border:2px solid #39c9a0;width:3em;height:2em;font-size:1.2em}.button[data-v-1335a39d]:hover{background-color:rgba(57,201,160,.3);color:#39c9a0}.comments[data-v-1335a39d]{color:#39c9a0;margin-left:.5em;cursor:pointer}.is-active.is-mobile-modal div.dropdown-item[data-v-1335a39d],div.dropdown-item[data-v-1335a39d]{padding:0}.is-hidden-tablet[data-v-1335a39d]{width:6em}.user-reacted[data-v-1335a39d],.user-reacted[data-v-1335a39d]:hover{background:#39c9a0;color:#fff}.visible[data-v-1335a39d]{display:none}#commentIcon[data-v-1335a39d]{margin-right:.25em}",""])},430:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.format=void 0;var n=o(425),r=o(393);e.format=function(t,e,o){var c=(0,n.diffSec)(t,o);return(0,n.formatDiff)(c,(0,r.getLocale)(e))}},431:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.render=e.cancel=void 0;var n=o(432),r=o(425),c=o(393),d={},l=function(t){clearTimeout(t),delete d[t]},m=function t(e,o,c,m){l((0,n.getTimerId)(e));var f=(0,r.diffSec)(o,m);e.innerHTML=(0,r.formatDiff)(f,c);var v=setTimeout(function(){t(e,o,c,m)},1e3*(0,r.nextInterval)(f),2147483647);d[v]=0,(0,n.saveTimerId)(e,v)};e.cancel=function(t){if(t)l((0,n.getTimerId)(t));else for(var e in d)l(e)};e.render=function(t,e,o){var r;void 0===t.length&&(t=[t]);for(var i=0;i<t.length;i++){r=t[i];var d=(0,n.getDateAttribute)(r),l=(0,c.getLocale)(e);m(r,d,l,o)}return t}},432:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTimerId=e.saveTimerId=e.getDateAttribute=void 0;var n=function(t,e){return t.getAttribute?t.getAttribute(e):t.attr?t.attr(e):void 0};e.getDateAttribute=function(t){return n(t,"datetime")};e.saveTimerId=function(t,e){return t.setAttribute?t.setAttribute("timeago-tid",e):t.attr?t.attr("timeago-tid",e):void 0};e.getTimerId=function(t){return n(t,"timeago-tid")}},433:function(t,e,o){"use strict";var n=o(394);o.n(n).a},434:function(t,e,o){(t.exports=o(10)(!1)).push([t.i,'.media-left[data-v-65200053]{margin-right:.5em}.media-right[data-v-65200053]{margin-left:auto}.card-header[data-v-65200053]{padding:10px;box-shadow:none}.profilePic img[data-v-65200053]{border-radius:6px}.profilePicProject img[data-v-65200053]{border-radius:6px;height:100%;width:48px}span[data-v-65200053]{color:#39c9a0}.grey[data-v-65200053]{color:#999}.created-at-mobile[data-v-65200053]{font-size:.75em;padding-top:-.5em}.community[data-v-65200053]{color:#39c9a0}.no-decor[data-v-65200053]{text-decoration:none;color:#000}.underline[data-v-65200053]:hover{color:#39c9a0;text-decoration:underline}.liveBox[data-v-65200053]{border-radius:3px;padding:.125em .25em;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:red;color:#fff}.update[data-v-65200053]{background-color:#39c9a0;color:#fff;width:12em;height:100%;margin-top:-10px;margin-right:-10px;border-top-right-radius:6px}.update[data-v-65200053]:before{position:absolute;top:0;content:"";border-color:#fff transparent transparent #fff;border-style:solid;border-width:1.75em}.update.is-mobile[data-v-65200053]{background-color:#39c9a0;color:#fff;width:6.5em;height:3.5em}div.level-left[data-v-65200053]{padding-left:3.5em}div.level-right[data-v-65200053]{margin-right:10px}',""])},435:function(t,e,o){"use strict";var n=o(395);o.n(n).a},436:function(t,e,o){(t.exports=o(10)(!1)).push([t.i,".liveBox[data-v-b889b48a]{border-radius:6px;padding:.25em .5em;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background:red;color:#fff;font-size:1.5em}",""])},437:function(t,e,o){"use strict";var n=o(396);o.n(n).a},438:function(t,e,o){(t.exports=o(10)(!1)).push([t.i,".media[data-v-0d049126]{padding:1em .5em .5em}.button.action[data-v-0d049126]{width:12em;color:#fff;background-color:#39c9a0;border-color:#39c9a0}",""])},439:function(t,e,o){"use strict";var n=o(397);o.n(n).a},440:function(t,e,o){(t.exports=o(10)(!1)).push([t.i,".upvote[data-v-4c8a1b0e]{margin:.35em .5em 0;color:#000}p small[data-v-4c8a1b0e]{color:#999}small a[data-v-4c8a1b0e]{font-weight:700}.upvote.user-upvoted[data-v-4c8a1b0e],small a[data-v-4c8a1b0e]{color:#39c9a0}#reply[data-v-4c8a1b0e]{padding-bottom:1em}",""])},443:function(t,e,o){"use strict";var n=o(400);o.n(n).a},444:function(t,e,o){(t.exports=o(10)(!1)).push([t.i,".level[data-v-5b2417a9]{padding-left:.5em;padding-bottom:.5em;display:flex;flex-wrap:wrap}.button[data-v-5b2417a9]{color:#39c9a0;border:2px solid #39c9a0;width:3em;height:2em;font-size:1.2em}.button[data-v-5b2417a9]:hover{background-color:rgba(57,201,160,.3);color:#39c9a0}.comments[data-v-5b2417a9]{color:#39c9a0;margin-left:.5em}.is-active.is-mobile-modal div.dropdown-item[data-v-5b2417a9],div.dropdown-item[data-v-5b2417a9]{padding:0}.is-hidden-tablet[data-v-5b2417a9]{width:6em}.user-reacted[data-v-5b2417a9],.user-reacted[data-v-5b2417a9]:hover{background:#39c9a0;color:#fff}",""])},445:function(t,e,o){"use strict";var n=o(401);o.n(n).a},446:function(t,e,o){(t.exports=o(10)(!1)).push([t.i,"div.card[data-v-693a4f6b]{border-radius:6px 6px 0 0;padding:0 5em}@media only screen and (max-width:600px){div.card[data-v-693a4f6b]{padding:0}}.box[data-v-693a4f6b]{width:55em;max-width:100%;max-height:85vh;overflow-y:scroll}.modal-content[data-v-693a4f6b]{border-radius:6px;margin:0;color:#39c9a0;width:auto;height:auto;overflow:visible}.content[data-v-693a4f6b]{max-height:60vh;padding:1em;overflow-y:scroll;word-break:break-word}",""])},447:function(t,e,o){"use strict";var n=o(402);o.n(n).a},448:function(t,e,o){(t.exports=o(10)(!1)).push([t.i,"#content-box[data-v-18693df4]{padding:1em;max-height:30em;overflow:hidden}#content-box.fullHeight[data-v-18693df4]{max-height:none}#content-box .read-more[data-v-18693df4]{position:absolute;bottom:3em;left:0;width:100%;text-align:center;margin:0;padding:30px 0 0;background-image:linear-gradient(180deg,transparent,#fff,#fff)}b-icon[data-v-18693df4]{color:#000}.media-content[data-v-18693df4]{padding:0 2em}.card[data-v-18693df4]{border-radius:6px;margin-bottom:.65em}.content[data-v-18693df4]{word-break:break-word;margin-left:8px}",""])}}]);